<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinZoo é‡‘èä¹å›­</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        // Firebase é…ç½®ï¼ˆè¯·æ›¿æ¢ä¸ºæ‚¨çš„é…ç½®ï¼‰
        const firebaseConfig = {
            apiKey: "AIzaSyDemoKey",
            authDomain: "finzoo-demo.firebaseapp.com",
            projectId: "finzoo-demo",
            storageBucket: "finzoo-demo.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef"
        };
        
        // åˆå§‹åŒ– Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        // å°† Firebase å®ä¾‹æš´éœ²åˆ°å…¨å±€
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseAuth = auth;
        window.firebaseFunctions = { getDoc, setDoc, updateDoc, onSnapshot, doc, signInAnonymously };
    </script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* åŸºç¡€æ ·å¼ï¼šå»¶ç»­åŸå¹´è½»åŒ–æ·±è“+æ´»åŠ›é‡‘é…è‰²ï¼Œè´´åˆè‚¡ç¥¨ä¸»é¢˜ */
        :root {
            --main-blue: #0F3460;
            --light-blue: #EEF2F5;
            --accent-blue: #1A1A2E;
            --gold: #FFD700;
            --silver: #E0E0E0;
            --bronze: #CD7F32;
            --stock-up: #00B42A;
            --stock-down: #F53F3F;
            --text-dark: #1A1A2E;
            --text-light: #64748B;
            --white: #FFFFFF;
            --shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 5px 15px rgba(0, 0, 0, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Roboto, sans-serif;
        }

        body {
            background-color: var(--light-blue);
            color: var(--text-dark);
            min-height: 100vh;
            padding: 16px;
            padding-bottom: 80px; /* ä¸ºåº•éƒ¨å¯¼èˆªæ ç•™å‡ºç©ºé—´ */
            padding-top: 60px; /* ä¸ºé¡¶éƒ¨çŠ¶æ€æ ç•™å‡ºç©ºé—´ */
            line-height: 1.5;
            overflow-x: hidden; /* é˜²æ­¢æ¨ªå‘æ»šåŠ¨ */
        }

        /* è§†å›¾åˆ‡æ¢ - ä¼˜åŒ–æ€§èƒ½ï¼Œå‡å°‘å¡é¡¿ */
        .view-section {
            display: none;
        }

        .view-section.active {
            display: block;
        }

        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .top-status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--main-blue) 100%);
            color: var(--white);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 999;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .status-user-id {
            font-size: 13px;
            opacity: 0.9;
        }

        .status-points {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 600;
            font-size: 15px;
        }

        .status-points-icon {
            width: 18px;
            height: 18px;
        }

        /* åº•éƒ¨å¯¼èˆªæ  */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--main-blue);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 0;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            transition: all 0.2s;
            padding: 4px 16px;
            border-radius: 8px;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .nav-item:hover,
        .nav-item.active {
            color: var(--gold);
            background-color: rgba(255, 215, 0, 0.1);
        }

        .nav-item:active {
            transform: scale(0.95);
        }

        .nav-item-icon {
            width: 24px;
            height: 24px;
        }

        .nav-item-label {
            font-size: 12px;
        }

        /* æ´»åŠ¨æ—¥å¿— */
        .activity-log {
            background-color: var(--light-blue);
            border-radius: 10px;
            padding: 16px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .activity-log-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--main-blue);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(0, 0, 0, 0.05);
            font-size: 13px;
            color: var(--text-dark);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-time {
            color: var(--text-light);
            font-size: 11px;
            min-width: 60px;
        }

        .activity-icon {
            width: 16px;
            height: 16px;
            color: var(--gold);
        }

        /* å¤´éƒ¨ï¼šä¿ç•™IPé€‰æ‹©å™¨æ ¸å¿ƒäº¤äº’ï¼Œè°ƒæ•´æ ‡é¢˜æ ·å¼ */
        header {
            background-color: var(--main-blue);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            color: var(--white);
            box-shadow: var(--shadow);
        }

        .header-top {
            display: flex;
            flex-direction: column;
            gap: 16px;
            align-items: center;
        }

        @media (min-width: 768px) {
            .header-top {
                flex-direction: row;
                justify-content: space-between;
            }
        }

        .logo {
            font-size: 28px; /* æ ‡é¢˜ç¨å¾®æ”¾å¤§ */
            font-weight: 700;
            color: var(--gold);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-bar {
            display: flex;
            gap: 8px;
            width: 100%;
            max-width: 550px;
        }

        .search-bar input {
            flex: 1;
            padding: 10px 14px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            color: var(--text-dark);
            outline: none;
        }

        .search-bar button {
            background-color: var(--gold);
            color: var(--main-blue);
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-bar button:hover {
            background-color: #FFE066;
        }

        /* IPé€‰æ‹©å™¨ï¼šä¿ç•™ç‚¹å‡»äº¤äº’ï¼Œå¼ºåŒ–è‚¡ç¥¨å­¦ä¹ ä»»åŠ¡å…³è” */
        .ip-selector {
            display: flex;
            gap: 24px;
            justify-content: center;
            margin-top: 20px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .ip-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 90px;
            cursor: pointer;
            transition: transform 0.2s;
            padding: 8px;
        }

        .ip-item:hover {
            transform: scale(1.05);
        }

        .ip-avatar {
            width: 68px;
            height: 68px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow);
            object-fit: cover;
            margin-bottom: 8px;
        }

        .ip-avatar.active {
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        .ip-name {
            font-size: 15px;
            text-align: center;
            font-weight: 500;
            color: var(--white);
        }

        .ip-tag {
            font-size: 12px;
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: 2px 8px;
            border-radius: 12px;
            margin-top: 4px;
        }

        /* æ¿å—é€šç”¨æ ·å¼ï¼šç»Ÿä¸€å¡ç‰‡é£æ ¼ï¼Œä¿ç•™åŸè®¾è®¡æ„Ÿ */
        .section {
            background-color: var(--white);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--main-blue);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .section-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--main-blue);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--gold);
        }

        .section-desc {
            font-size: 16px;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        /* 1. æ¨èè‚¡ç¥¨æ¿å—ï¼ˆå‰ç½®ï¼Œä¸¥æ ¼ä¿ç•™ä¸€è¡Œä¸€æ”¯+ä¸‰ç±»åˆ†ç±»ï¼‰ */
        .stock-category {
            margin-bottom: 24px;
        }

        .category-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--accent-blue);
            margin-bottom: 16px;
            padding-left: 8px;
            border-left: 3px solid var(--gold);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-name span {
            font-size: 14px;
            font-weight: normal;
            color: var(--text-light);
            background-color: var(--light-blue);
            padding: 2px 8px;
            border-radius: 8px;
        }

        .stock-list {
            background-color: var(--light-blue);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .stock-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: background-color 0.2s;
            background-color: transparent;
        }

        .stock-row:hover {
            background-color: rgba(15, 52, 96, 0.03);
        }

        .stock-name {
            font-size: 17px;
            font-weight: 600;
            flex: 1;
            margin-right: 16px;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stock-code {
            font-size: 14px;
            color: var(--text-light);
            margin-left: 8px;
        }

        .stock-price {
            font-size: 17px;
            color: var(--text-dark);
            min-width: 80px;
            text-align: right;
        }

        .stock-change {
            font-size: 17px;
            font-weight: 600;
            min-width: 100px;
            text-align: right;
        }

        .change-up {
            color: var(--stock-up);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 4px;
        }

        .change-down {
            color: var(--stock-down);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 4px;
        }

        .change-flat {
            color: var(--text-light);
        }

        /* 2. IPä¸“å±è‚¡ç¥¨å­¦ä¹ ä»»åŠ¡ï¼ˆç‚¹å‡»IPå¤´åƒè·³è½¬ï¼‰ */
        .ip-task-container {
            position: relative;
        }

        .ip-task-panel {
            display: none;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        /* é»˜è®¤æ˜¾ç¤ºæŸ¯å—æ¿å— */
        #conan-panel {
            display: grid;
        }

        @media (min-width: 768px) {
            .ip-task-panel {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 992px) {
            .ip-task-panel {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }

        .task-card {
            background-color: var(--light-blue);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
            border-bottom: 3px solid transparent;
        }

        /* æ¯ä¸ªIPä»»åŠ¡å¡ç‰‡å·®å¼‚åŒ–é…è‰² */
        .task-card.conan-card {
            border-bottom-color: #1E88E5;
        }

        .task-card.pikachu-card {
            border-bottom-color: #FFCC00;
        }

        .task-card.doraemon-card {
            border-bottom-color: #0091EA;
        }

        .task-card.chikawa-card {
            border-bottom-color: #FF9E80;
        }

        .task-card:hover {
            transform: translateY(-3px);
        }

        .task-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .task-card-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
        }

        .task-card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--main-blue);
        }

        .task-card-content {
            margin-bottom: 16px;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(0, 0, 0, 0.05);
        }

        .task-label {
            font-size: 15px;
            color: var(--text-light);
        }

        .task-value {
            font-size: 15px;
            font-weight: 500;
        }

        .task-progress {
            width: 100%;
            height: 8px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--gold);
            border-radius: 4px;
        }

        .task-card-btn {
            width: 100%;
            background-color: var(--main-blue);
            color: var(--white);
            border: none;
            border-radius: 6px;
            padding: 10px 0;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .task-card-btn:hover {
            background-color: var(--accent-blue);
        }

        /* 3. ç¤¾åŒºè®¨è®ºåŒºï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ */
        .community-search {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .community-search input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #E0E0E0;
            border-radius: 6px;
            font-size: 16px;
            color: var(--text-dark);
            outline: none;
        }

        .community-search button {
            background-color: var(--main-blue);
            color: var(--white);
            border: none;
            border-radius: 6px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .community-search button:hover {
            background-color: var(--accent-blue);
        }

        .community-tabs {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            border-bottom: 1px solid #E0E0E0;
            padding-bottom: 8px;
        }

        .community-tab {
            font-size: 17px;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            padding: 4px 8px;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .community-tab.active {
            color: var(--main-blue);
            border-bottom-color: var(--gold);
        }

        .community-content {
            display: none;
        }

        .community-content.active {
            display: block;
        }

        .topic-list {
            list-style: none;
        }

        .topic-item {
            background-color: var(--light-blue);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: box-shadow 0.2s;
        }

        .topic-item:hover {
            box-shadow: var(--shadow-hover);
        }

        .topic-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .topic-title {
            font-size: 17px;
            font-weight: 600;
            color: var(--main-blue);
        }

        .topic-time {
            font-size: 14px;
            color: var(--text-light);
        }

        .topic-content {
            font-size: 15px;
            color: var(--text-dark);
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .topic-footer {
            display: flex;
            gap: 24px;
            font-size: 14px;
            color: var(--text-light);
        }

        .topic-footer span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .topic-reply {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed rgba(0, 0, 0, 0.05);
        }

        .reply-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #E0E0E0;
            border-radius: 6px;
            font-size: 15px;
            margin-bottom: 8px;
            outline: none;
        }

        .reply-btn {
            background-color: var(--gold);
            color: var(--main-blue);
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .reply-btn:hover {
            background-color: #FFE066;
        }

        /* 4. ç†è´¢å® ç‰©å…»æˆï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ */
        .pet-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
        }

        @media (min-width: 768px) {
            .pet-container {
                grid-template-columns: 1fr 2fr;
            }
        }

        .pet-profile {
            background-color: var(--light-blue);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .pet-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--gold);
            margin-bottom: 16px;
            background-color: var(--white);
            padding: 10px;
        }

        .pet-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--main-blue);
            margin-bottom: 4px;
        }

        .pet-level {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 8px;
        }

        .pet-exp {
            color: var(--text-light);
            font-size: 12px;
            margin-bottom: 16px;
        }

        .pet-mood-display {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            padding: 12px;
            background-color: var(--white);
            border-radius: 8px;
        }

        .mood-icon {
            font-size: 24px;
        }

        .mood-text {
            flex: 1;
            font-size: 14px;
            color: var(--text-dark);
        }

        .mood-value {
            font-weight: 600;
            color: var(--main-blue);
        }

        .pet-stats {
            width: 100%;
            margin-bottom: 20px;
        }

        .pet-stat {
            margin-bottom: 12px;
        }

        .pet-stat-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 14px;
        }

        .stat-name {
            font-weight: 500;
        }

        .stat-value {
            color: var(--main-blue);
            font-weight: 600;
        }

        .stat-bar {
            height: 8px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            background-color: var(--gold);
            border-radius: 4px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        /* åŠ¨æ€çŠ¶æ€æ¡é¢œè‰² */
        .stat-fill.high {
            background-color: var(--stock-up);
        }

        .stat-fill.medium {
            background-color: var(--gold);
        }

        .stat-fill.low {
            background-color: var(--stock-down);
        }

        .pet-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }

        .pet-action {
            background-color: var(--white);
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .pet-action:hover {
            background-color: var(--main-blue);
            color: var(--white);
            border-color: var(--main-blue);
        }

        .pet-training {
            background-color: var(--light-blue);
            border-radius: 10px;
            padding: 20px;
        }

        .training-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--main-blue);
        }

        .training-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
        }

        .training-item {
            background-color: var(--white);
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .training-item:hover {
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        .training-cost {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            color: var(--stock-down);
        }

        .training-icon {
            font-size: 20px;
        }

        .training-info {
            display: flex;
            flex-direction: column;
        }

        .training-name {
            font-weight: 500;
        }

        .training-effect {
            font-size: 12px;
            color: var(--text-light);
        }

        /* 5. é‡‘èå·¥å…·åº“ï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .tool-item {
            background-color: var(--light-blue);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tool-item:hover {
            background-color: rgba(15, 52, 96, 0.08);
            transform: translateY(-3px);
        }

        .tool-icon {
            width: 60px;
            height: 60px;
            background-color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 24px;
            color: var(--main-blue);
            box-shadow: var(--shadow);
        }

        .tool-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .tool-desc {
            font-size: 13px;
            color: var(--text-light);
        }

        /* 6. ä»»åŠ¡ä¸­å¿ƒï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ */
        .task-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--light-blue);
        }

        .task-filter {
            padding: 8px 20px;
            background-color: var(--light-blue);
            border-radius: 20px;
            font-size: 15px;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .task-filter.active {
            background-color: var(--main-blue);
            color: var(--white);
            border-color: var(--gold);
        }

        .task-filter:hover:not(.active) {
            background-color: rgba(15, 52, 96, 0.1);
        }

        .task-list {
            display: grid;
            gap: 16px;
        }

        .task-item {
            border: 1px solid #E0E0E0;
            border-radius: 10px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .task-item:hover {
            border-color: var(--main-blue);
        }

        .task-info {
            flex: 1;
        }

        .task-title {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .task-desc {
            font-size: 13px;
            color: var(--text-light);
        }

        .task-reward {
            background-color: rgba(255, 215, 0, 0.1);
            color: var(--main-blue);
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 13px;
            font-weight: 600;
            margin-right: 16px;
        }

        .task-action {
            padding: 6px 16px;
            background-color: var(--main-blue);
            color: var(--white);
            border: none;
            border-radius: 6px;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .task-action:hover {
            background-color: var(--accent-blue);
        }

        .task-action.completed {
            background-color: var(--stock-up);
        }

        /* æ–°å¢ï¼š7. ç§¯åˆ†æ’è¡Œæ¦œæ¨¡å— */
        .ranking-tabs {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            border-bottom: 1px solid #E0E0E0;
            padding-bottom: 8px;
            overflow-x: auto;
        }

        .ranking-tab {
            font-size: 17px;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            padding: 4px 8px;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .ranking-tab.active {
            color: var(--main-blue);
            border-bottom-color: var(--gold);
        }

        .ranking-content {
            display: none;
        }

        .ranking-content.active {
            display: block;
        }

        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: var(--light-blue);
            border-radius: 8px;
            transition: transform 0.2s;
        }

        .ranking-item:hover {
            transform: translateX(5px);
        }

        .ranking-rank {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--main-blue);
            margin-right: 16px;
            flex-shrink: 0;
        }

        .rank-1 {
            background-color: var(--gold);
            color: var(--main-blue);
        }

        .rank-2 {
            background-color: var(--silver);
            color: var(--main-blue);
        }

        .rank-3 {
            background-color: var(--bronze);
            color: white;
        }

        .ranking-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 16px;
            border: 2px solid transparent;
        }

        .ranking-1 .ranking-avatar {
            border-color: var(--gold);
        }

        .ranking-2 .ranking-avatar {
            border-color: var(--silver);
        }

        .ranking-3 .ranking-avatar {
            border-color: var(--bronze);
        }

        .ranking-info {
            flex: 1;
        }

        .ranking-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .ranking-desc {
            font-size: 13px;
            color: var(--text-light);
        }

        .ranking-score {
            font-size: 18px;
            font-weight: 700;
            color: var(--main-blue);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ranking-score i {
            color: var(--gold);
        }

        .self-ranking {
            border: 2px solid var(--gold);
            background-color: rgba(255, 215, 0, 0.05);
        }

        /* é¡µè„š */
        footer {
            background-color: var(--main-blue);
            color: var(--white);
            padding: 30px 20px;
            border-radius: 12px;
            margin-top: 30px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            font-size: 14px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 16px;
        }

        .footer-links a {
            color: var(--white);
            text-decoration: none;
        }

        .footer-links a:hover {
            color: var(--gold);
        }

        /* å¼¹å¹•ç³»ç»Ÿ - è§†é¢‘é£æ ¼ä»å³åˆ°å·¦æ¨ªå‘ç§»åŠ¨ */
        .danmaku-container {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 80px;
            pointer-events: none;
            z-index: 500;
            overflow: hidden;
        }

        .danmaku-item {
            position: absolute;
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(8px);
            color: var(--white);
            padding: 6px 14px;
            border-radius: 16px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            pointer-events: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border-left: 3px solid var(--gold);
            will-change: transform;
        }

        .danmaku-item.danmaku-profit {
            border-left-color: var(--stock-up);
            background: rgba(0, 180, 42, 0.85);
        }

        .danmaku-item.danmaku-friend {
            border-left-color: #4A90E2;
            background: rgba(74, 144, 226, 0.85);
        }

        .danmaku-item.danmaku-pet {
            border-left-color: var(--gold);
            background: rgba(255, 215, 0, 0.85);
            color: var(--main-blue);
        }

        .danmaku-item.danmaku-hot {
            border-left-color: #FF6B6B;
            background: rgba(255, 107, 107, 0.85);
        }

        .danmaku-icon {
            font-size: 16px;
            flex-shrink: 0;
        }

        /* å¼¹çª—æç¤º - ä¼˜åŒ–è®¾è®¡ */
        .toast {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background-color: rgba(26, 26, 46, 0.95);
            color: var(--white);
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            max-width: 300px;
            animation: toastSlideIn 0.3s ease, toastSlideOut 0.3s ease 2.7s;
            border-left: 4px solid var(--gold);
        }

        @keyframes toastSlideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes toastSlideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        /* è¿›å…¥ç½‘é¡µå¼¹çª— - ä¼˜åŒ–åŠ¨æ•ˆ */
        .welcome-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.4s ease;
        }

        .welcome-modal.show {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .welcome-modal-content {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            border-radius: 24px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUpScale 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            border: 2px solid var(--gold);
        }

        @keyframes slideUpScale {
            from {
                transform: translateY(50px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .daily-highlight {
            background: linear-gradient(135deg, var(--gold) 0%, #FFE066 100%);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            color: var(--main-blue);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .daily-highlight-icon {
            font-size: 32px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .welcome-modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .welcome-modal-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--main-blue);
            margin-bottom: 10px;
        }

        .welcome-modal-desc {
            font-size: 16px;
            color: var(--text-light);
        }

        .welcome-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 28px;
            color: var(--text-light);
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .welcome-modal-close:hover {
            background-color: var(--light-blue);
            color: var(--main-blue);
        }

        .welcome-sections {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .welcome-section-item {
            background: linear-gradient(135deg, var(--light-blue) 0%, rgba(15, 52, 96, 0.05) 100%);
            border-radius: 12px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .welcome-section-item:hover {
            transform: translateY(-5px);
            border-color: var(--gold);
            box-shadow: var(--shadow-hover);
        }

        .welcome-section-icon {
            font-size: 48px;
            margin-bottom: 12px;
            display: block;
        }

        .welcome-section-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--main-blue);
            margin-bottom: 8px;
        }

        .welcome-section-desc {
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.6;
        }

        /* è‚¡ç¥¨ç¿»è½¬å¡ç‰Œæ•ˆæœ */
        .stock-card-container {
            perspective: 1000px;
            height: 120px;
        }

        .stock-card {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .stock-card.flipped {
            transform: rotateY(180deg);
        }

        .stock-card-front,
        .stock-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background-color: var(--white);
        }

        .stock-card-front {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .stock-card-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, var(--main-blue) 0%, var(--accent-blue) 100%);
            color: var(--white);
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            gap: 12px;
            padding: 20px;
        }

        .stock-detail-row {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 14px;
        }

        .stock-detail-label {
            opacity: 0.9;
        }

        .stock-detail-value {
            font-weight: 600;
        }

        /* å® ç‰©æŠšæ‘¸æ•ˆæœ */
        .pet-avatar-container {
            position: relative;
            cursor: pointer;
        }

        .pet-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--gold);
            margin-bottom: 16px;
            background-color: var(--white);
            padding: 10px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .pet-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .pet-action {
            background-color: var(--white);
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            position: relative;
        }

        .pet-action:hover {
            background-color: var(--main-blue);
            color: var(--white);
            border-color: var(--main-blue);
        }

        .pet-action::before {
            content: 'ğŸ‘‹';
            position: absolute;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s;
            pointer-events: none;
            font-size: 24px;
        }

        .pet-action:hover::before {
            opacity: 1;
            transform: translateY(-30px) rotate(15deg);
            animation: wave 0.5s ease infinite;
        }

        @keyframes wave {
            0%, 100% {
                transform: translateY(-30px) rotate(15deg);
            }
            50% {
                transform: translateY(-35px) rotate(-15deg);
            }
        }

        .pet-avatar-container::after {
            content: 'ğŸ‘‹';
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 32px;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s;
            pointer-events: none;
        }

        .pet-avatar-container:hover::after {
            opacity: 1;
            transform: scale(1) rotate(15deg);
            animation: petWave 1s ease infinite;
        }

        @keyframes petWave {
            0%, 100% {
                transform: scale(1) rotate(15deg);
            }
            50% {
                transform: scale(1.1) rotate(-15deg);
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
    <div class="top-status-bar">
        <div class="status-user-id" id="statusUserId">ç”¨æˆ·: åŠ è½½ä¸­...</div>
        <div class="status-points">
            <i data-lucide="coins" class="status-points-icon"></i>
            <span id="statusPoints">0</span> ç§¯åˆ†
        </div>
    </div>

    <!-- å¼¹å¹•å®¹å™¨ï¼ˆä»…åœ¨é¦–é¡µæ˜¾ç¤ºï¼‰ -->
    <div class="danmaku-container" id="danmakuContainer"></div>

    <!-- è¿›å…¥ç½‘é¡µå¼¹çª— - ä»Šæ—¥åŠ¨æ€ -->
    <div class="welcome-modal" id="welcomeModal">
        <div class="welcome-modal-content">
            <div class="welcome-modal-close" onclick="closeWelcomeModal()" style="position: absolute; top: 20px; right: 20px; font-size: 28px; color: var(--text-light); cursor: pointer; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s;">&times;</div>
            <div class="welcome-modal-header">
                <h2 class="welcome-modal-title" style="font-size: 28px; font-weight: 700; color: var(--main-blue); margin-bottom: 10px; text-align: center;">æ¬¢è¿å›æ¥ï¼</h2>
                <p class="welcome-modal-desc" style="font-size: 16px; color: var(--text-light); text-align: center; margin-bottom: 24px;">ä»Šæ—¥é‡‘èåŠ¨æ€ä¸€è§ˆ</p>
            </div>
            
            <!-- ä»Šæ—¥äº®ç‚¹ -->
            <div class="daily-highlight">
                <span class="daily-highlight-icon">ğŸ“ˆ</span>
                <div>
                    <div style="font-size: 18px; margin-bottom: 4px;">ä»Šæ—¥æ”¶ç›Šå¢åŠ </div>
                    <div style="font-size: 24px; font-weight: 700;" id="daily-profit">+Â¥1,234.56</div>
                </div>
            </div>
            
            <!-- çƒ­é—¨è¯é¢˜ -->
            <div class="welcome-section-item" style="background: linear-gradient(135deg, var(--light-blue) 0%, rgba(15, 52, 96, 0.05) 100%); border-radius: 12px; padding: 20px; margin-bottom: 16px; border: 2px solid transparent; transition: all 0.3s;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                    <span style="font-size: 32px;">ğŸ”¥</span>
                    <h3 style="font-size: 18px; font-weight: 600; color: var(--main-blue);">ä»Šæ—¥çƒ­é—¨è¯é¢˜</h3>
                </div>
                <p style="font-size: 14px; color: var(--text-dark); line-height: 1.6; margin-bottom: 12px;" id="daily-topic">å¤®è¡Œé™å‡†å¯¹è‚¡å¸‚çš„å½±å“åˆ†æ - 987äººå‚ä¸è®¨è®º</p>
                <button class="task-action" onclick="navigateToSection('hot-topics'); closeWelcomeModal();" style="width: 100%;">æŸ¥çœ‹è¯¦æƒ…</button>
            </div>
            
            <!-- å® ç‰©å›åº” -->
            <div class="welcome-section-item" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%); border-radius: 12px; padding: 20px; margin-bottom: 16px; border: 2px solid rgba(255, 215, 0, 0.3);">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                    <span style="font-size: 32px;">ğŸ¾</span>
                    <h3 style="font-size: 18px; font-weight: 600; color: var(--main-blue);">è‚¡å°æ¢çš„é—®å€™</h3>
                </div>
                <p style="font-size: 14px; color: var(--text-dark); line-height: 1.6;" id="pet-greeting">ä¸»äººï¼Œä»Šå¤©ä¹Ÿè¦åŠªåŠ›å­¦ä¹ é‡‘èçŸ¥è¯†å“¦ï¼æˆ‘çš„å¿ƒæƒ…å€¼å¾ˆé«˜ï¼Œéšæ—¶å¯ä»¥å¼€å§‹è®­ç»ƒ~</p>
            </div>
            
            <!-- å¿«é€Ÿå…¥å£ -->
            <div class="welcome-sections" style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 20px;">
                <div class="welcome-section-item" onclick="navigateToSection('stock-profit'); closeWelcomeModal();">
                    <span class="welcome-section-icon">ğŸ’°</span>
                    <h3 class="welcome-section-title">æŸ¥çœ‹ç‚’è‚¡æ”¶ç›Š</h3>
                    <p class="welcome-section-desc">æŸ¥çœ‹ä½ çš„æŠ•èµ„ç»„åˆæ”¶ç›Šæƒ…å†µ</p>
                </div>
                <div class="welcome-section-item" onclick="navigateToSection('hot-news'); closeWelcomeModal();">
                    <span class="welcome-section-icon">ğŸ“°</span>
                    <h3 class="welcome-section-title">çƒ­é—¨é‡‘èå’¨è¯¢</h3>
                    <p class="welcome-section-desc">æµè§ˆæœ€æ–°é‡‘èèµ„è®¯å’Œå¸‚åœºè¶‹åŠ¿</p>
                </div>
            </div>
        </div>
    </div>

    <!-- å¤´éƒ¨ï¼šåŒ…å«IPé€‰æ‹©å™¨ï¼Œæ ‡é¢˜ä¿®æ”¹ä¸ºæ— ç¬¦å·ä¸”æ”¾å¤§ -->
    <header>
        <div class="header-top">
            <div class="logo">
                FinZoo é‡‘èä¹å›­ <!-- åˆ æ‰äº†å‰é¢çš„ç¬¦å· -->
            </div>
            <div class="search-bar">
                <input type="text" placeholder="æœç´¢è‚¡ç¥¨ä»£ç æˆ–åç§°...">
                <button>æœç´¢</button>
            </div>
        </div>
        
        <!-- IPé€‰æ‹©å™¨ï¼šç‚¹å‡»è·³è½¬å¯¹åº”å­¦ä¹ ä»»åŠ¡ -->
        <div class="ip-selector">
            <div class="ip-item" onclick="switchIP('conan')">
                <img src="OIP.webp" alt="æŸ¯å—" class="ip-avatar" id="conan-avatar">
                <div class="ip-name">æŸ¯å—</div>
                <div class="ip-tag">è´¢æŠ¥ä¾¦æ¢</div>
            </div>
            <div class="ip-item" onclick="switchIP('pikachu')">
                <img src="OIP(2).webp" alt="çš®å¡ä¸˜" class="ip-avatar" id="pikachu-avatar" >
                <div class="ip-name">çš®å¡ä¸˜</div>
                <div class="ip-tag">æ³¢åŠ¨åˆ†æ</div>
            </div>
            <div class="ip-item" onclick="switchIP('doraemon')">
                <img src="OIP(1).webp" alt="å“†å•¦Aæ¢¦" class="ip-avatar" id="doraemon-avatar">
                <div class="ip-name">å“†å•¦Aæ¢¦</div>
                <div class="ip-tag">é•¿çº¿æŠ•èµ„</div>
            </div>
            <div class="ip-item" onclick="switchIP('chikawa')">
                <img src="OIP(3).webp" alt="Chikawa" class="ip-avatar" id="chikawa-avatar">
                <div class="ip-name">Chikawa</div>
                <div class="ip-tag">é£é™©æ§åˆ¶</div>
            </div>
        </div>
        
        <!-- IPåŠ¨ç‰©è§’è‰²å±•ç¤ºå¡ç‰‡ -->
        <div class="section" style="margin-top: 24px; background-color: var(--white); border-radius: 12px; padding: 24px; box-shadow: var(--shadow); border-top: 4px solid var(--main-blue);">
            <h2 class="section-title" style="font-size: 22px; font-weight: 600; color: var(--main-blue); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                ğŸ¾ IPåŠ¨ç‰©è§’è‰²ä¼™ä¼´
            </h2>
            <p class="section-desc" style="font-size: 16px; color: var(--text-light); margin-bottom: 20px;">é€‰æ‹©ä½ çš„é‡‘èå­¦ä¹ ä¼™ä¼´ï¼Œæ¯ä¸ªIPéƒ½æœ‰ç‹¬ç‰¹çš„ä¸“é•¿</p>
            
            <div class="tools-grid" style="grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 20px;">
                <div class="tool-item" onclick="switchIP('conan')" style="cursor: pointer;">
                    <img src="OIP.webp" alt="æŸ¯å—" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 12px; border: 3px solid var(--gold);" >
                    <div class="tool-name">æŸ¯å—</div>
                    <div class="tool-desc">è´¢æŠ¥ä¾¦æ¢ä¸“å®¶</div>
                </div>
                <div class="tool-item" onclick="switchIP('pikachu')" style="cursor: pointer;">
                    <img src="OIP(2).webp" alt="çš®å¡ä¸˜" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 12px; border: 3px solid var(--gold);">
                    <div class="tool-name">çš®å¡ä¸˜</div>
                    <div class="tool-desc">æ³¢åŠ¨åˆ†æå¤§å¸ˆ</div>
                </div>
                <div class="tool-item" onclick="switchIP('doraemon')" style="cursor: pointer;">
                    <img src="OIP(1).webp" alt="å“†å•¦Aæ¢¦" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 12px; border: 3px solid var(--gold);" >
                    <div class="tool-name">å“†å•¦Aæ¢¦</div>
                    <div class="tool-desc">é•¿çº¿æŠ•èµ„é¡¾é—®</div>
                </div>
                <div class="tool-item" onclick="switchIP('chikawa')" style="cursor: pointer;">
                    <img src="OIP(3).webp" alt="Chikawa" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 12px; border: 3px solid var(--gold);">
                    <div class="tool-name">Chikawa</div>
                    <div class="tool-desc">é£é™©æ§åˆ¶ä¸“å®¶</div>
                </div>
            </div>
        </div>
    </header>

    <!-- é¦–é¡µè§†å›¾ -->
    <div id="home-view" class="view-section active">
    <!-- ç°ä»£åŒ–å¸ƒå±€ï¼šä¸»å†…å®¹åŒº + è¾¹æ  -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- ä¸»å†…å®¹åŒºï¼ˆå·¦ä¾§ä¸¤æ ï¼‰ -->
        <div class="lg:col-span-2 space-y-6">
    <!-- 1. æ¨èè‚¡ç¥¨æ¿å— - å‰ä¸‰åªå¢é•¿è‚¡ç¥¨ï¼ˆä¸åŒåˆ†ç±»ï¼‰ -->
    <section class="section">
        <h2 class="section-title">ğŸ“Š ä»Šæ—¥å¢é•¿è‚¡ç¥¨TOP3</h2>
        <p class="section-desc">ç²¾é€‰ä¸‰å¤§ä¸åŒåˆ†ç±»çš„å¢é•¿è‚¡ç¥¨ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</p>
        
        <!-- å‰ä¸‰åªå¢é•¿è‚¡ç¥¨ï¼ˆä¸åŒåˆ†ç±»ï¼‰ -->
        <div class="stock-list" style="margin-top: 20px;">
            <div class="stock-row">
                <div class="stock-card-container" onclick="flipStockCard(this)">
                    <div class="stock-card">
                        <div class="stock-card-front">
                            <div class="stock-name">
                                <span>ç¾å›¢-W</span>
                                <span class="stock-code">(03690.HK)</span>
                            </div>
                            <div class="stock-price">HK$102.50</div>
                            <div class="stock-change change-up">
                                <span>â†‘</span> 4.58%
                            </div>
                        </div>
                        <div class="stock-card-back">
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">è‚¡ç¥¨åˆ†ç±»</span>
                                <span class="stock-detail-value">ç§‘æŠ€è‚¡/æ¸¯è‚¡</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                <span class="stock-detail-value">HK$102.50</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                <span class="stock-detail-value">+4.58%</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">å¸‚å€¼</span>
                                <span class="stock-detail-value">1,234.5äº¿</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="stock-row">
                <div class="stock-card-container" onclick="flipStockCard(this)">
                    <div class="stock-card">
                        <div class="stock-card-front">
                            <div class="stock-name">
                                <span>ä¸­å›½çŸ³æ²¹</span>
                                <span class="stock-code">(601857.SS)</span>
                            </div>
                            <div class="stock-price">Â¥8.75</div>
                            <div class="stock-change change-up">
                                <span>â†‘</span> 3.12%
                            </div>
                        </div>
                        <div class="stock-card-back">
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">è‚¡ç¥¨åˆ†ç±»</span>
                                <span class="stock-detail-value">èƒ½æºè‚¡/Aè‚¡</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                <span class="stock-detail-value">Â¥8.75</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                <span class="stock-detail-value">+3.12%</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">å¸‚å€¼</span>
                                <span class="stock-detail-value">856.3äº¿</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="stock-row">
                <div class="stock-card-container" onclick="flipStockCard(this)">
                    <div class="stock-card">
                        <div class="stock-card-front">
                            <div class="stock-name">
                                <span>è´µå·èŒ…å°</span>
                                <span class="stock-code">(600519.SS)</span>
                            </div>
                            <div class="stock-price">Â¥1600.00</div>
                            <div class="stock-change change-up">
                                <span>â†‘</span> 2.88%
                            </div>
                        </div>
                        <div class="stock-card-back">
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">è‚¡ç¥¨åˆ†ç±»</span>
                                <span class="stock-detail-value">æ¶ˆè´¹è‚¡/Aè‚¡</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                <span class="stock-detail-value">Â¥1600.00</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                <span class="stock-detail-value">+2.88%</span>
                            </div>
                            <div class="stock-detail-row">
                                <span class="stock-detail-label">å¸‚å€¼</span>
                                <span class="stock-detail-value">2,156.8äº¿</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- åˆ†ç±»1ï¼šæˆé•¿å‹è‚¡ç¥¨ -->
        <div class="stock-category">
            <div class="category-name">
                æˆé•¿å‹è‚¡ç¥¨ <span>é€‚åˆé•¿æœŸæŠ•èµ„ç ”ç©¶</span>
            </div>
            <div class="stock-list">
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>ç§‘æŠ€åˆ›æ–°</span>
                                    <span class="stock-code">(600123)</span>
                                </div>
                                <div class="stock-price">Â¥56.80</div>
                                <div class="stock-change change-up">
                                    <span>â†‘</span> 3.25%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">ç§‘æŠ€åˆ›æ–°è‚¡ä»½æœ‰é™å…¬å¸</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥56.80</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">+3.25%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">1,234.5äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>ç»¿è‰²èƒ½æº</span>
                                    <span class="stock-code">(002456)</span>
                                </div>
                                <div class="stock-price">Â¥32.45</div>
                                <div class="stock-change change-up">
                                    <span>â†‘</span> 1.89%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">ç»¿è‰²èƒ½æºç§‘æŠ€é›†å›¢</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥32.45</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">+1.89%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">856.3äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>åŒ»ç–—å¥åº·</span>
                                    <span class="stock-code">(300789)</span>
                                </div>
                                <div class="stock-price">Â¥78.20</div>
                                <div class="stock-change change-down">
                                    <span>â†“</span> 0.56%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">åŒ»ç–—å¥åº·äº§ä¸šè‚¡ä»½</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥78.20</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">-0.56%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">2,156.8äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- åˆ†ç±»2ï¼šä»·å€¼å‹è‚¡ç¥¨ -->
        <div class="stock-category">
            <div class="category-name">
                ä»·å€¼å‹è‚¡ç¥¨ <span>é€‚åˆåŸºæœ¬é¢åˆ†æç»ƒä¹ </span>
            </div>
            <div class="stock-list">
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>è“ç­¹é“¶è¡Œ</span>
                                    <span class="stock-code">(601234)</span>
                                </div>
                                <div class="stock-price">Â¥12.68</div>
                                <div class="stock-change change-flat">0.00%</div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">è“ç­¹é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥12.68</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">0.00%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">3,456.2äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>æ¶ˆè´¹é¾™å¤´</span>
                                    <span class="stock-code">(000567)</span>
                                </div>
                                <div class="stock-price">Â¥65.32</div>
                                <div class="stock-change change-up">
                                    <span>â†‘</span> 2.15%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">æ¶ˆè´¹é¾™å¤´å“ç‰Œè‚¡ä»½</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥65.32</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">+2.15%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">1,987.6äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>åŸºå»ºå·¥ç¨‹</span>
                                    <span class="stock-code">(603890)</span>
                                </div>
                                <div class="stock-price">Â¥8.95</div>
                                <div class="stock-change change-down">
                                    <span>â†“</span> 1.23%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">åŸºå»ºå·¥ç¨‹é›†å›¢è‚¡ä»½</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥8.95</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">-1.23%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">567.9äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- åˆ†ç±»3ï¼šæ³¢åŠ¨å‹è‚¡ç¥¨ -->
        <div class="stock-category">
            <div class="category-name">
                æ³¢åŠ¨å‹è‚¡ç¥¨ <span>é€‚åˆæŠ€æœ¯åˆ†æç»ƒä¹ </span>
            </div>
            <div class="stock-list">
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>æ–°èƒ½æºææ–™</span>
                                    <span class="stock-code">(300234)</span>
                                </div>
                                <div class="stock-price">Â¥42.76</div>
                                <div class="stock-change change-up">
                                    <span>â†‘</span> 5.32%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">æ–°èƒ½æºææ–™ç§‘æŠ€è‚¡ä»½</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥42.76</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">+5.32%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">923.4äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>åŠå¯¼ä½“</span>
                                    <span class="stock-code">(600567)</span>
                                </div>
                                <div class="stock-price">Â¥89.45</div>
                                <div class="stock-change change-down">
                                    <span>â†“</span> 3.87%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">åŠå¯¼ä½“åˆ¶é€ è‚¡ä»½å…¬å¸</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥89.45</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">-3.87%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">2,678.9äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stock-row">
                    <div class="stock-card-container" onclick="flipStockCard(this)">
                        <div class="stock-card">
                            <div class="stock-card-front">
                                <div class="stock-name">
                                    <span>æ•°å­—ç»æµ</span>
                                    <span class="stock-code">(002890)</span>
                                </div>
                                <div class="stock-price">Â¥36.21</div>
                                <div class="stock-change change-up">
                                    <span>â†‘</span> 4.12%
                                </div>
                            </div>
                            <div class="stock-card-back">
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">è‚¡ç¥¨åç§°</span>
                                    <span class="stock-detail-value">æ•°å­—ç»æµäº§ä¸šå‘å±•è‚¡ä»½</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å½“å‰ä»·æ ¼</span>
                                    <span class="stock-detail-value">Â¥36.21</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">æ¶¨è·Œå¹…</span>
                                    <span class="stock-detail-value">+4.12%</span>
                                </div>
                                <div class="stock-detail-row">
                                    <span class="stock-detail-label">å¸‚å€¼</span>
                                    <span class="stock-detail-value">1,456.7äº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 2. IPä¸“å±è‚¡ç¥¨å­¦ä¹ ä»»åŠ¡ï¼ˆç‚¹å‡»IPå¤´åƒè·³è½¬ï¼‰ -->
    <section class="section">
        <h2 class="section-title">ğŸ¯ IPä¸“å±å­¦ä¹ ä»»åŠ¡</h2>
        <p class="section-desc">è·Ÿéšå–œæ¬¢çš„IPå®Œæˆè‚¡ç¥¨å­¦ä¹ ä»»åŠ¡ï¼Œè§£é”ä¸“å±æŠ€èƒ½</p>
        
        <div class="ip-task-container">
            <!-- æŸ¯å—çš„å­¦ä¹ ä»»åŠ¡ -->
            <div class="ip-task-panel" id="conan-panel">
                <div class="task-card conan-card">
                    <div class="task-card-header">
                        <img src="OIP(4).webp" alt="æŸ¯å—" class="task-card-avatar">
                        <div class="task-card-title">è´¢æŠ¥ä¾¦æ¢å…¥é—¨</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">åˆ†æ3ä»½åˆ©æ¶¦è¡¨</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜†â˜†â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">200ç§¯åˆ†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">1/3</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 33%;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn">ç»§ç»­ä»»åŠ¡</button>
                </div>
                
                <div class="task-card conan-card">
                    <div class="task-card-header">
                        <img src="OIP(5).webp" alt="æŸ¯å—" class="task-card-avatar" >
                        <div class="task-card-title">èµ„äº§è´Ÿå€ºè¡¨è§£å¯†</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">è¯†åˆ«3ä¸ªè´¢åŠ¡é£é™©ç‚¹</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜…â˜†â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">300ç§¯åˆ†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">0/3</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn">å¼€å§‹ä»»åŠ¡</button>
                </div>
                
                <div class="task-card conan-card">
                    <div class="task-card-header">
                        <img src="OIP(6).webp" alt="æŸ¯å—" class="task-card-avatar">
                        <div class="task-card-title">ç°é‡‘æµä¾¦æ¢æŒ‘æˆ˜</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">å®Œæˆè´¢åŠ¡èˆå¼Šè¯†åˆ«æµ‹éªŒ</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜…â˜…â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">500ç§¯åˆ†+ä¸“å±å¾½ç« </div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">æœªè§£é”</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 0%; background-color: #ccc;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn" style="background-color: #ccc; cursor: not-allowed;">å®Œæˆå‰åºä»»åŠ¡è§£é”</button>
                </div>
            </div>
            
            <!-- çš®å¡ä¸˜çš„å­¦ä¹ ä»»åŠ¡ -->
            <div class="ip-task-panel" id="pikachu-panel">
                <div class="task-card pikachu-card">
                    <div class="task-card-header">
                        <img src="OIP(7).webp" alt="çš®å¡ä¸˜" class="task-card-avatar" >
                        <div class="task-card-title">Kçº¿å›¾åŸºç¡€</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">è¯†åˆ«5ç§Kçº¿å½¢æ€</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜†â˜†â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">150ç§¯åˆ†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">0/5</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn">å¼€å§‹ä»»åŠ¡</button>
                </div>
                
                <div class="task-card pikachu-card">
                    <div class="task-card-header">
                        <img src="OIP(8).webp" alt="çš®å¡ä¸˜" class="task-card-avatar">
                        <div class="task-card-title">ç§»åŠ¨å¹³å‡çº¿åº”ç”¨</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">åˆ†æ3åªè‚¡ç¥¨è¶‹åŠ¿</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜…â˜†â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">250ç§¯åˆ†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">æœªè§£é”</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 0%; background-color: #ccc;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn" style="background-color: #ccc; cursor: not-allowed;">å®Œæˆå‰åºä»»åŠ¡è§£é”</button>
                </div>
            </div>
            
            <!-- å“†å•¦Aæ¢¦çš„å­¦ä¹ ä»»åŠ¡ -->
            <div class="ip-task-panel" id="doraemon-panel">
                <div class="task-card doraemon-card">
                    <div class="task-card-header">
                        <img src="OIP(9).webp" alt="å“†å•¦Aæ¢¦" class="task-card-avatar" onerror="this.src='./doraemon.jpg'">
                        <div class="task-card-title">è¡Œä¸šåˆ†æå…¥é—¨</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">å®Œæˆæ–°èƒ½æºè¡Œä¸šç ”ç©¶</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜…â˜†â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">200ç§¯åˆ†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">0/1</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn">å¼€å§‹ä»»åŠ¡</button>
                </div>
            </div>
            
            <!-- Chikawaçš„å­¦ä¹ ä»»åŠ¡ -->
            <div class="ip-task-panel" id="chikawa-panel">
                <div class="task-card chikawa-card">
                    <div class="task-card-header">
                        <img src="OIP(10).webp" alt="Chikawa" class="task-card-avatar" onerror="this.src='./chikawa.jpg'">
                        <div class="task-card-title">é£é™©æ§åˆ¶åŸºç¡€</div>
                    </div>
                    <div class="task-card-content">
                        <div class="task-item">
                            <div class="task-label">ä»»åŠ¡ç›®æ ‡</div>
                            <div class="task-value">å­¦ä¹ æ­¢æŸæ­¢ç›ˆç­–ç•¥</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">éš¾åº¦</div>
                            <div class="task-value">â˜…â˜…â˜†â˜†â˜†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">å¥–åŠ±</div>
                            <div class="task-value">150ç§¯åˆ†</div>
                        </div>
                        <div class="task-item">
                            <div class="task-label">è¿›åº¦</div>
                            <div class="task-value">0/1</div>
                        </div>
                        <div class="task-progress">
                            <div class="progress-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <button class="task-card-btn">å¼€å§‹ä»»åŠ¡</button>
                </div>
            </div>
        </div>
    </section>

    <!-- é‡‘èçŸ¥è¯†é—®ç­” -->
    <section class="section">
        <h2 class="section-title">â“ é‡‘èçŸ¥è¯†é—®ç­”</h2>
        <p class="section-desc">æµ‹è¯•ä½ çš„é‡‘èçŸ¥è¯†ï¼Œè·å¾—ç§¯åˆ†å¥–åŠ±</p>
        
        <div class="card" style="text-align: center; padding: 30px;">
            <div style="font-size: 48px; margin-bottom: 16px;">ğŸ§ </div>
            <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 12px;">æ¯æ—¥é‡‘èé—®ç­”æŒ‘æˆ˜</h3>
            <p style="color: var(--text-light); margin-bottom: 24px;">å®Œæˆæ¯æ—¥é—®ç­”ï¼Œæå‡é‡‘èçŸ¥è¯†ï¼Œè·å¾—ç§¯åˆ†å¥–åŠ±</p>
            <button class="task-action" onclick="startQuiz()" style="width: 200px; margin: 0 auto;">
                <i data-lucide="play" style="width: 16px; height: 16px;"></i>
                å¼€å§‹æŒ‘æˆ˜
            </button>
        </div>
    </section>

    <!-- 3. ç¤¾åŒºè®¨è®ºåŒºï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ -->
    <section class="section">
        <h2 class="section-title">ğŸ’¬ è‚¡ç¥¨ç¤¾åŒºè®¨è®º</h2>
        <p class="section-desc">å’Œè‚¡å‹äº¤æµåˆ†æå¿ƒå¾—ï¼Œåˆ†äº«æŠ•èµ„æŠ€å·§</p>
        
        <div class="community-search">
            <input type="text" placeholder="æœç´¢è®¨è®ºè¯é¢˜...">
            <button>æœç´¢</button>
        </div>
        
        <div class="community-tabs">
            <div class="community-tab active" onclick="switchCommunity('hot')">çƒ­é—¨è®¨è®º</div>
            <div class="community-tab" onclick="switchCommunity('news')">è‚¡å¸‚åŠ¨æ€</div>
            <div class="community-tab" onclick="switchCommunity('analysis')">åˆ†ææŠ€å·§</div>
            <div class="community-tab" onclick="switchCommunity('beginner')">æ–°æ‰‹é—®ç­”</div>
        </div>
        
        <!-- çƒ­é—¨è®¨è®º -->
        <div class="community-content active" id="hot-content">
            <ul class="topic-list">
                <li class="topic-item">
                    <div class="topic-header">
                        <div class="topic-title">ç§‘æŠ€åˆ›æ–°ï¼ˆ600123ï¼‰çš„è´¢æŠ¥éšè—ç€å“ªäº›ä¿¡å·ï¼Ÿ</div>
                        <div class="topic-time">2å°æ—¶å‰</div>
                    </div>
                    <div class="topic-content">
                        ä»Šå¤©ç ”ç©¶äº†ç§‘æŠ€åˆ›æ–°çš„å¹´æŠ¥ï¼Œå‘ç°è¥æ”¶å¢é•¿ä½†å‡€åˆ©æ¶¦ç‡ä¸‹é™äº†1.2%ï¼Œåº”æ”¶è´¦æ¬¾å‘¨è½¬å¤©æ•°å¢åŠ äº†5å¤©ã€‚ç»“åˆæŸ¯å—çš„è´¢åŠ¡ä¾¦æ¢è¯¾ç¨‹ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªéœ€è¦å…³æ³¨çš„é£é™©ç‚¹...
                    </div>
                    <div class="topic-footer">
                        <span>ğŸ‘¤ è´¢æŠ¥åˆ†æå¸ˆ</span>
                        <span>ğŸ‘ï¸ 356</span>
                        <span>ğŸ’¬ 24</span>
                        <span>â¤ï¸ 58</span>
                    </div>
                    <div class="topic-reply">
                        <input type="text" class="reply-input" placeholder="åˆ†äº«ä½ çš„çœ‹æ³•...">
                        <button class="reply-btn">å›å¤</button>
                    </div>
                </li>
                
                <li class="topic-item">
                    <div class="topic-header">
                        <div class="topic-title">ç”¨çš®å¡ä¸˜æ•™çš„å‡çº¿æ³•åˆ†æåŠå¯¼ä½“ï¼ˆ600567ï¼‰èµ°åŠ¿</div>
                        <div class="topic-time">æ˜¨å¤© 15:30</div>
                    </div>
                    <div class="topic-content">
                        æŒ‰ç…§çš®å¡ä¸˜è¯¾ç¨‹é‡Œè®²çš„5æ—¥å’Œ20æ—¥å‡çº¿äº¤å‰ç­–ç•¥ï¼ŒåŠå¯¼ä½“è¿™åªç¥¨åœ¨3æœˆ10æ—¥å‡ºç°äº†é‡‘å‰ä¿¡å·ï¼Œåˆ°ç°åœ¨æ¶¨å¹…å·²ç»æœ‰15%äº†ï¼é™„ä¸Šæˆ‘çš„åˆ†æå›¾...
                    </div>
                    <div class="topic-footer">
                        <span>ğŸ‘¤ æŠ€æœ¯æ´¾å°æ•£</span>
                        <span>ğŸ‘ï¸ 782</span>
                        <span>ğŸ’¬ 46</span>
                        <span>â¤ï¸ 124</span>
                    </div>
                    <div class="topic-reply">
                        <input type="text" class="reply-input" placeholder="åˆ†äº«ä½ çš„çœ‹æ³•...">
                        <button class="reply-btn">å›å¤</button>
                    </div>
                </li>
            </ul>
        </div>
        
        <!-- å…¶ä»–ç¤¾åŒºå†…å®¹ï¼ˆé»˜è®¤éšè—ï¼‰ -->
        <div class="community-content" id="news-content">
            <ul class="topic-list">
                <li class="topic-item">
                    <div class="topic-header">
                        <div class="topic-title">å¤®è¡Œé™å‡†å¯¹è‚¡å¸‚çš„å½±å“åˆ†æ</div>
                        <div class="topic-time">3å°æ—¶å‰</div>
                    </div>
                    <div class="topic-content">
                        æœ€æ–°æ¶ˆæ¯ï¼Œå¤®è¡Œå†³å®šä¸‹è°ƒå­˜æ¬¾å‡†å¤‡é‡‘ç‡0.25ä¸ªç™¾åˆ†ç‚¹ï¼Œé‡Šæ”¾é•¿æœŸèµ„é‡‘çº¦5000äº¿å…ƒã€‚è¿™å¯¹é“¶è¡Œè‚¡å’ŒåŸºå»ºè‚¡å¯èƒ½æ˜¯åˆ©å¥½...
                    </div>
                    <div class="topic-footer">
                        <span>ğŸ‘¤ å®è§‚è§‚å¯Ÿå‘˜</span>
                        <span>ğŸ‘ï¸ 521</span>
                        <span>ğŸ’¬ 32</span>
                        <span>â¤ï¸ 76</span>
                    </div>
                    <div class="topic-reply">
                        <input type="text" class="reply-input" placeholder="åˆ†äº«ä½ çš„çœ‹æ³•...">
                        <button class="reply-btn">å›å¤</button>
                    </div>
                </li>
            </ul>
        </div>
        
        <div class="community-content" id="analysis-content">
            <!-- åˆ†ææŠ€å·§å†…å®¹ -->
        </div>
        
        <div class="community-content" id="beginner-content">
            <!-- æ–°æ‰‹é—®ç­”å†…å®¹ -->
        </div>
    </section>

    <!-- 4. ç†è´¢å® ç‰©å…»æˆï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ -->
    <section class="section">
        <h2 class="section-title">ğŸ¾ è‚¡ç¥¨å°åŠ©æ‰‹å…»æˆ</h2>
        <p class="section-desc">å–‚å…»ä½ çš„è‚¡ç¥¨åŠ©æ‰‹ï¼Œæå‡åˆ†æèƒ½åŠ›ï¼Œé™ªä½ ä¸€èµ·å­¦ä¹ è‚¡ç¥¨çŸ¥è¯†</p>
        
        <div class="pet-container">
            <div class="pet-profile">
                <div class="pet-avatar-container" onclick="petInteraction()">
                    <img src="https://picsum.photos/seed/stockpet/200/200" alt="è‚¡ç¥¨å°åŠ©æ‰‹" class="pet-avatar">
                </div>
                <div class="pet-name">è‚¡å°æ¢</div>
                <div class="pet-level">Lv.<span id="petLevel">4</span> åˆçº§åˆ†æå¸ˆ</div>
                <div class="pet-exp">è·ç¦»ä¸‹ä¸€çº§è¿˜éœ€ <span id="petExpNeeded">200</span> ç»éªŒ</div>
                
                <!-- å¿ƒæƒ…çŠ¶æ€æ˜¾ç¤º -->
                <div class="pet-mood-display">
                    <span class="mood-icon" id="moodIcon">ğŸ˜Š</span>
                    <div class="mood-text">
                        <div>å¿ƒæƒ…å€¼: <span class="mood-value" id="moodValue">75</span>/100</div>
                        <div class="stat-bar" style="margin-top: 4px;">
                            <div class="stat-fill" id="moodBar" style="width: 75%;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="pet-stats">
                    <div class="pet-stat">
                        <div class="pet-stat-label">
                            <span class="stat-name">åˆ†æèƒ½åŠ›</span>
                            <span class="stat-value">65/100</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 65%;"></div>
                        </div>
                    </div>
                    <div class="pet-stat">
                        <div class="pet-stat-label">
                            <span class="stat-name">å¸‚åœºæ•æ„Ÿåº¦</span>
                            <span class="stat-value">48/100</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 48%;"></div>
                        </div>
                    </div>
                    <div class="pet-stat">
                        <div class="pet-stat-label">
                            <span class="stat-name">é£é™©è¯†åˆ«</span>
                            <span class="stat-value">52/100</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 52%;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="pet-actions">
                    <button class="pet-action" onclick="feedPet()">
                        <i data-lucide="utensils" style="width: 16px; height: 16px;"></i>
                        <span>å–‚é£Ÿ</span>
                    </button>
                    <button class="pet-action" onclick="trainPet()">
                        <i data-lucide="book-open" style="width: 16px; height: 16px;"></i>
                        <span>è®­ç»ƒ</span>
                    </button>
                </div>
                
                <!-- æ´»åŠ¨æ—¥å¿— -->
                <div class="activity-log">
                    <div class="activity-log-title">
                        <i data-lucide="clock" style="width: 18px; height: 18px;"></i>
                        æ´»åŠ¨è®°å½•
                    </div>
                    <div id="activityLogList">
                        <div class="activity-item">
                            <span class="activity-time">--:--</span>
                            <i data-lucide="info" class="activity-icon"></i>
                            <span>æš‚æ— æ´»åŠ¨è®°å½•</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="pet-training">
                <div class="training-title">ä»Šæ—¥è®­ç»ƒè®¡åˆ’ï¼ˆæå‡å® ç‰©èƒ½åŠ›ï¼‰</div>
                <div class="training-list">
                    <div class="training-item" onclick="startTraining('kline')">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i data-lucide="trending-up" style="width: 20px; height: 20px; color: var(--main-blue);"></i>
                            <div class="training-info">
                                <div class="training-name">Kçº¿åˆ†æå…¥é—¨</div>
                                <div class="training-effect">+8 åˆ†æèƒ½åŠ›</div>
                            </div>
                        </div>
                        <div class="training-cost">
                            <i data-lucide="heart" style="width: 12px; height: 12px;"></i>
                            <span>æ¶ˆè€—å¿ƒæƒ… -5</span>
                        </div>
                    </div>
                    <div class="training-item" onclick="startTraining('finance')">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i data-lucide="file-text" style="width: 20px; height: 20px; color: var(--main-blue);"></i>
                            <div class="training-info">
                                <div class="training-name">è´¢æŠ¥åŸºç¡€ç²¾è®²</div>
                                <div class="training-effect">+10 åˆ†æèƒ½åŠ›</div>
                            </div>
                        </div>
                        <div class="training-cost">
                            <i data-lucide="heart" style="width: 12px; height: 12px;"></i>
                            <span>æ¶ˆè€—å¿ƒæƒ… -8</span>
                        </div>
                    </div>
                    <div class="training-item" onclick="startTraining('market')">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i data-lucide="activity" style="width: 20px; height: 20px; color: var(--main-blue);"></i>
                            <div class="training-info">
                                <div class="training-name">å¸‚åœºæ•æ„Ÿåº¦åŸ¹å…»</div>
                                <div class="training-effect">+6 å¸‚åœºæ•æ„Ÿåº¦</div>
                            </div>
                        </div>
                        <div class="training-cost">
                            <i data-lucide="heart" style="width: 12px; height: 12px;"></i>
                            <span>æ¶ˆè€—å¿ƒæƒ… -6</span>
                        </div>
                    </div>
                    <div class="training-item" onclick="startTraining('risk')">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <i data-lucide="shield-alert" style="width: 20px; height: 20px; color: var(--main-blue);"></i>
                            <div class="training-info">
                                <div class="training-name">é£é™©è¯†åˆ«æ¨¡æ‹Ÿ</div>
                                <div class="training-effect">+7 é£é™©è¯†åˆ«</div>
                            </div>
                        </div>
                        <div class="training-cost">
                            <i data-lucide="heart" style="width: 12px; height: 12px;"></i>
                            <span>æ¶ˆè€—å¿ƒæƒ… -7</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. é‡‘èå·¥å…·åº“ï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ -->
    <section class="section">
        <h2 class="section-title">ğŸ”§ è‚¡ç¥¨åˆ†æå·¥å…·åº“</h2>
        <p class="section-desc">å®ç”¨è‚¡ç¥¨åˆ†æå·¥å…·ï¼Œå¸®ä½ æ›´å¥½åœ°ç ”ç©¶è‚¡ç¥¨</p>
        
        <div class="tools-grid">
            <div class="tool-item" onclick="showToast('å¸‚ç›ˆç‡è®¡ç®—å™¨å·²æ‰“å¼€')">
                <div class="tool-icon">ğŸ“Š</div>
                <div class="tool-name">å¸‚ç›ˆç‡è®¡ç®—å™¨</div>
                <div class="tool-desc">è®¡ç®—è‚¡ç¥¨å¸‚ç›ˆç‡åŠä¼°å€¼æ°´å¹³</div>
            </div>
            
            <div class="tool-item" onclick="showToast('æ”¶ç›Šè®¡ç®—å™¨å·²æ‰“å¼€')">
                <div class="tool-icon">ğŸ’°</div>
                <div class="tool-name">æ”¶ç›Šè®¡ç®—å™¨</div>
                <div class="tool-desc">è®¡ç®—æŒä»“æ”¶ç›ŠåŠç›®æ ‡ä»·</div>
            </div>
            
            <div class="tool-item" onclick="showToast('æ­¢æŸæ­¢ç›ˆè®¡ç®—å™¨å·²æ‰“å¼€')">
                <div class="tool-icon">ğŸ›¡ï¸</div>
                <div class="tool-name">æ­¢æŸæ­¢ç›ˆè®¡ç®—å™¨</div>
                <div class="tool-desc">ç§‘å­¦è®¾ç½®æ­¢æŸæ­¢ç›ˆç‚¹ä½</div>
            </div>
            
            <div class="tool-item" onclick="showToast('ä»“ä½ç®¡ç†å·¥å…·å·²æ‰“å¼€')">
                <div class="tool-icon">âš–ï¸</div>
                <div class="tool-name">ä»“ä½ç®¡ç†å·¥å…·</div>
                <div class="tool-desc">è®¡ç®—åˆç†æŒä»“æ¯”ä¾‹</div>
            </div>
            
            <div class="tool-item" onclick="showToast('è´¢åŠ¡æ¯”ç‡åˆ†æå·¥å…·å·²æ‰“å¼€')">
                <div class="tool-icon">ğŸ“ˆ</div>
                <div class="tool-name">è´¢åŠ¡æ¯”ç‡åˆ†æ</div>
                <div class="tool-desc">è‡ªåŠ¨è®¡ç®—å…³é”®è´¢åŠ¡æŒ‡æ ‡</div>
            </div>
            
            <div class="tool-item" onclick="showToast('è¡Œä¸šå¯¹æ¯”å·¥å…·å·²æ‰“å¼€')">
                <div class="tool-icon">ğŸ“Š</div>
                <div class="tool-name">è¡Œä¸šå¯¹æ¯”å·¥å…·</div>
                <div class="tool-desc">å¯¹æ¯”åŒè¡Œä¸šå…¬å¸æ•°æ®</div>
            </div>
        </div>
    </section>

    <!-- 6. ä»»åŠ¡ä¸­å¿ƒï¼ˆè‚¡ç¥¨ä¸»é¢˜é€‚é…ï¼‰ -->
    <section class="section">
        <h2 class="section-title">ğŸ¯ è‚¡ç¥¨å­¦ä¹ ä»»åŠ¡ä¸­å¿ƒ</h2>
        <p class="section-desc">å®Œæˆè‚¡ç¥¨å­¦ä¹ ä»»åŠ¡ï¼Œè·å–ç§¯åˆ†å¥–åŠ±ï¼Œæå‡åˆ†æèƒ½åŠ›</p>
        
        <div class="task-filters">
            <div class="task-filter active" onclick="switchTaskFilter('beginner', this)">æ–°æ‰‹ä»»åŠ¡</div>
            <div class="task-filter" onclick="switchTaskFilter('advanced', this)">è¿›é˜¶æŒ‘æˆ˜</div>
        </div>
        
        <!-- æ–°æ‰‹ä»»åŠ¡åˆ—è¡¨ -->
        <div class="task-list" id="beginnerTasks">
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">é¦–æ¬¡ç™»å½•</div>
                    <div class="task-desc">æ¬¢è¿æ¥åˆ° FinZoo é‡‘èä¹å›­ï¼å®Œæˆé¦–æ¬¡ç™»å½•å³å¯è·å¾—å¥–åŠ±</div>
                </div>
                <div class="task-reward">+50ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å®Œæˆ</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">é˜…è¯»ä¸€ç¯‡è´¢ç»æ–‡ç« </div>
                    <div class="task-desc">é˜…è¯»ä»»æ„ä¸€ç¯‡è´¢ç»èµ„è®¯ï¼Œäº†è§£å¸‚åœºåŠ¨æ€</div>
                </div>
                <div class="task-reward">+100ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å®Œæˆ</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">å®Œæˆä¸€æ¬¡å–‚é£Ÿ</div>
                    <div class="task-desc">ç»™è‚¡å°æ¢å–‚é£Ÿï¼Œæå‡å®ƒçš„å¿ƒæƒ…å€¼</div>
                </div>
                <div class="task-reward">+30ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å®Œæˆ</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">å®Œæˆä¸€æ¬¡è®­ç»ƒ</div>
                    <div class="task-desc">é€‰æ‹©ä»»æ„è®­ç»ƒé¡¹ç›®ï¼Œæå‡è‚¡å°æ¢çš„èƒ½åŠ›</div>
                </div>
                <div class="task-reward">+80ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å®Œæˆ</button>
            </div>
        </div>
        
        <!-- è¿›é˜¶æŒ‘æˆ˜åˆ—è¡¨ -->
        <div class="task-list" id="advancedTasks" style="display: none;">
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">åˆ†æ1åªè‚¡ç¥¨çš„Kçº¿å›¾</div>
                    <div class="task-desc">ä½¿ç”¨çš®å¡ä¸˜è¯¾ç¨‹ä¸­çš„æ–¹æ³•ï¼Œåˆ†æåŠå¯¼ä½“ï¼ˆ600567ï¼‰çš„30å¤©Kçº¿</div>
                </div>
                <div class="task-reward">+150ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å®Œæˆ</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">é˜…è¯»1ä»½ä¸Šå¸‚å…¬å¸å¹´æŠ¥</div>
                    <div class="task-desc">é˜…è¯»ç§‘æŠ€åˆ›æ–°ï¼ˆ600123ï¼‰2023å¹´å¹´æŠ¥ï¼Œæå–3ä¸ªå…³é”®æ•°æ®</div>
                </div>
                <div class="task-reward">+200ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å®Œæˆ</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">åœ¨ç¤¾åŒºå‘å¸ƒåˆ†æç¬”è®°</div>
                    <div class="task-desc">åˆ†äº«ä½ çš„è‚¡ç¥¨åˆ†æå¿ƒå¾—ï¼Œè·å¾—5ä¸ªä»¥ä¸Šç‚¹èµ</div>
                </div>
                <div class="task-reward">+250ç§¯åˆ†</div>
                <button class="task-action" onclick="completeTask(this)">å»å‘å¸ƒ</button>
            </div>
            
            <div class="task-item">
                <div class="task-info">
                    <div class="task-title">å®Œæˆ3ä¸ªIPå­¦ä¹ ä»»åŠ¡</div>
                    <div class="task-desc">ç´¯è®¡å®Œæˆ3ä¸ªIPä¸“å±å­¦ä¹ ä»»åŠ¡ï¼Œæå‡ç»¼åˆåˆ†æèƒ½åŠ›</div>
                </div>
                <div class="task-reward">+500ç§¯åˆ†+ä¸“å±çš®è‚¤</div>
                <button class="task-action" style="background-color: #ccc; cursor: not-allowed;">è¿›è¡Œä¸­(1/3)</button>
            </div>
        </div>
    </section>

    <!-- æ–°å¢ï¼š7. ç§¯åˆ†æ’è¡Œæ¦œæ¨¡å— -->
    <section class="section">
        <h2 class="section-title">ğŸ† ç§¯åˆ†æ’è¡Œæ¦œ</h2>
        <p class="section-desc">æŸ¥çœ‹ä½ çš„ç§¯åˆ†æ’åï¼Œä¸å…¨çƒç”¨æˆ·ä¸€èµ·æ¯”æ‹¼å­¦ä¹ æˆæœ</p>
        
        <div class="ranking-tabs">
            <div class="ranking-tab active" onclick="switchRanking('global')">å…¨çƒæ’å</div>
            <div class="ranking-tab" onclick="switchRanking('friends')">å¥½å‹æ’å</div>
            <div class="ranking-tab" onclick="switchRanking('school')">å­¦æ ¡æ’å</div>
        </div>
        
        <!-- ç‚’è‚¡æ”¶ç›Šæ’è¡Œæ¦œ -->
        <div class="ranking-content active" id="stock-profit-ranking">
            <div class="ranking-list">
                <div class="ranking-item ranking-1">
                    <div class="ranking-rank rank-1">1</div>
                    <img src="https://picsum.photos/seed/user1/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æŠ•èµ„å¤§å¸ˆ</div>
                        <div class="ranking-desc">æ€»æ”¶ç›Š +Â¥125,680</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ’°</i> +125,680
                    </div>
                </div>
                <div class="ranking-item ranking-2">
                    <div class="ranking-rank rank-2">2</div>
                    <img src="https://picsum.photos/seed/user2/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">è‚¡å¸‚èµ¢å®¶</div>
                        <div class="ranking-desc">æ€»æ”¶ç›Š +Â¥98,450</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ’°</i> +98,450
                    </div>
                </div>
                <div class="ranking-item ranking-3">
                    <div class="ranking-rank rank-3">3</div>
                    <img src="https://picsum.photos/seed/user3/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æ”¶ç›Šè¾¾äºº</div>
                        <div class="ranking-desc">æ€»æ”¶ç›Š +Â¥76,890</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ’°</i> +76,890
                    </div>
                </div>
                <div class="ranking-item self-ranking">
                    <div class="ranking-rank">18</div>
                    <img src="https://picsum.photos/seed/currentuser/200/200" alt="ä½ çš„å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æˆ‘ï¼ˆè‚¡ç¥¨æ–°æ‰‹ï¼‰</div>
                        <div class="ranking-desc">æ€»æ”¶ç›Š +Â¥8,640</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ’°</i> +8,640
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é‡‘èçŸ¥è¯†ç­”é¢˜æ’è¡Œæ¦œ -->
        <div class="ranking-content" id="quiz-ranking">
            <div class="ranking-list">
                <div class="ranking-item ranking-1">
                    <div class="ranking-rank rank-1">1</div>
                    <img src="https://picsum.photos/seed/quiz1/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">é‡‘èå­¦éœ¸</div>
                        <div class="ranking-desc">æ­£ç¡®ç‡ 98% Â· è¿ç»­ç­”å¯¹ 156é¢˜</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ§ </i> 98%
                    </div>
                </div>
                <div class="ranking-item ranking-2">
                    <div class="ranking-rank rank-2">2</div>
                    <img src="https://picsum.photos/seed/quiz2/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">çŸ¥è¯†è¾¾äºº</div>
                        <div class="ranking-desc">æ­£ç¡®ç‡ 95% Â· è¿ç»­ç­”å¯¹ 142é¢˜</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ§ </i> 95%
                    </div>
                </div>
                <div class="ranking-item ranking-3">
                    <div class="ranking-rank rank-3">3</div>
                    <img src="https://picsum.photos/seed/quiz3/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">ç­”é¢˜é«˜æ‰‹</div>
                        <div class="ranking-desc">æ­£ç¡®ç‡ 92% Â· è¿ç»­ç­”å¯¹ 128é¢˜</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ§ </i> 92%
                    </div>
                </div>
                <div class="ranking-item self-ranking">
                    <div class="ranking-rank">25</div>
                    <img src="https://picsum.photos/seed/currentuser/200/200" alt="ä½ çš„å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æˆ‘ï¼ˆè‚¡ç¥¨æ–°æ‰‹ï¼‰</div>
                        <div class="ranking-desc">æ­£ç¡®ç‡ 75% Â· è¿ç»­ç­”å¯¹ 32é¢˜</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ§ </i> 75%
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å® ç‰©å–‚å…»æ’è¡Œæ¦œ -->
        <div class="ranking-content" id="pet-care-ranking">
            <div class="ranking-list">
                <div class="ranking-item ranking-1">
                    <div class="ranking-rank rank-1">1</div>
                    <img src="https://picsum.photos/seed/pet1/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">å® ç‰©è¾¾äºº</div>
                        <div class="ranking-desc">å® ç‰©ç­‰çº§ Lv.25 Â· å¿ƒæƒ…å€¼ 100</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ¾</i> Lv.25
                    </div>
                </div>
                <div class="ranking-item ranking-2">
                    <div class="ranking-rank rank-2">2</div>
                    <img src="https://picsum.photos/seed/pet2/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">å–‚å…»ä¸“å®¶</div>
                        <div class="ranking-desc">å® ç‰©ç­‰çº§ Lv.22 Â· å¿ƒæƒ…å€¼ 98</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ¾</i> Lv.22
                    </div>
                </div>
                <div class="ranking-item ranking-3">
                    <div class="ranking-rank rank-3">3</div>
                    <img src="https://picsum.photos/seed/pet3/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">çˆ±å¿ƒä¸»äºº</div>
                        <div class="ranking-desc">å® ç‰©ç­‰çº§ Lv.20 Â· å¿ƒæƒ…å€¼ 95</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ¾</i> Lv.20
                    </div>
                </div>
                <div class="ranking-item self-ranking">
                    <div class="ranking-rank">42</div>
                    <img src="https://picsum.photos/seed/currentuser/200/200" alt="ä½ çš„å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æˆ‘ï¼ˆè‚¡ç¥¨æ–°æ‰‹ï¼‰</div>
                        <div class="ranking-desc">å® ç‰©ç­‰çº§ Lv.4 Â· å¿ƒæƒ…å€¼ 75</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ¾</i> Lv.4
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ—§ç‰ˆå…¨çƒæ’åï¼ˆä¿ç•™ä½œä¸ºå¤‡ç”¨ï¼‰ -->
        <div class="ranking-content" id="global-ranking" style="display: none;">
            <div class="ranking-list">
                <div class="ranking-item ranking-1">
                    <div class="ranking-rank rank-1">1</div>
                    <img src="https://picsum.photos/seed/user1/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">è‚¡å¸‚å°è¾¾äºº</div>
                        <div class="ranking-desc">å®Œæˆ32ä¸ªå­¦ä¹ ä»»åŠ¡ Â· åˆ†æå¤§å¸ˆ</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 25,680
                    </div>
                </div>
                
                <div class="ranking-item ranking-2">
                    <div class="ranking-rank rank-2">2</div>
                    <img src="https://picsum.photos/seed/user2/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">è´¢æŠ¥åˆ†æå¸ˆ</div>
                        <div class="ranking-desc">å®Œæˆ28ä¸ªå­¦ä¹ ä»»åŠ¡ Â· è´¢åŠ¡ä¸“å®¶</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 23,450
                    </div>
                </div>
                
                <div class="ranking-item ranking-3">
                    <div class="ranking-rank rank-3">3</div>
                    <img src="https://picsum.photos/seed/user3/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">Kçº¿ç‹™å‡»æ‰‹</div>
                        <div class="ranking-desc">å®Œæˆ25ä¸ªå­¦ä¹ ä»»åŠ¡ Â· æŠ€æœ¯æ´¾é«˜æ‰‹</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 21,890
                    </div>
                </div>
                
                <div class="ranking-item">
                    <div class="ranking-rank">4</div>
                    <img src="https://picsum.photos/seed/user4/200/200" alt="ç”¨æˆ·å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">ä»·å€¼æŠ•èµ„è€…</div>
                        <div class="ranking-desc">å®Œæˆ22ä¸ªå­¦ä¹ ä»»åŠ¡ Â· é•¿çº¿ä¸“å®¶</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 19,750
                    </div>
                </div>
                
                <div class="ranking-item self-ranking">
                    <div class="ranking-rank">18</div>
                    <img src="https://picsum.photos/seed/currentuser/200/200" alt="ä½ çš„å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æˆ‘ï¼ˆè‚¡ç¥¨æ–°æ‰‹ï¼‰</div>
                        <div class="ranking-desc">å®Œæˆ8ä¸ªå­¦ä¹ ä»»åŠ¡ Â· åˆçº§åˆ†æå¸ˆ</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 8,640
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å¥½å‹æ’å -->
        <div class="ranking-content" id="friends-ranking">
            <div class="ranking-list">
                <div class="ranking-item">
                    <div class="ranking-rank rank-1">1</div>
                    <img src="https://picsum.photos/seed/friend1/200/200" alt="å¥½å‹å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">å°æ˜åŒå­¦</div>
                        <div class="ranking-desc">å®Œæˆ15ä¸ªå­¦ä¹ ä»»åŠ¡ Â· è¿›é˜¶å­¦ä¹ è€…</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 12,350
                    </div>
                </div>
                
                <div class="ranking-item self-ranking">
                    <div class="ranking-rank rank-2">2</div>
                    <img src="https://picsum.photos/seed/currentuser/200/200" alt="ä½ çš„å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æˆ‘ï¼ˆè‚¡ç¥¨æ–°æ‰‹ï¼‰</div>
                        <div class="ranking-desc">å®Œæˆ8ä¸ªå­¦ä¹ ä»»åŠ¡ Â· åˆçº§åˆ†æå¸ˆ</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 8,640
                    </div>
                </div>
                
                <div class="ranking-item">
                    <div class="ranking-rank rank-3">3</div>
                    <img src="https://picsum.photos/seed/friend2/200/200" alt="å¥½å‹å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">å°çº¢è´¢ç»</div>
                        <div class="ranking-desc">å®Œæˆ6ä¸ªå­¦ä¹ ä»»åŠ¡ Â· å…¥é—¨å­¦ä¹ è€…</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 6,280
                    </div>
                </div>
            </div>
        </div>
        
        <!-- å­¦æ ¡æ’å -->
        <div class="ranking-content" id="school-ranking">
            <div class="ranking-list">
                <div class="ranking-item">
                    <div class="ranking-rank rank-1">1</div>
                    <img src="https://picsum.photos/seed/school1/200/200" alt="æ ¡å‹å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">å¤§å­¦é‡‘èå“¥</div>
                        <div class="ranking-desc">å®Œæˆ24ä¸ªå­¦ä¹ ä»»åŠ¡ Â· æ ¡å›­æŠ•èµ„è¾¾äºº</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 20,150
                    </div>
                </div>
                
                <div class="ranking-item">
                    <div class="ranking-rank">5</div>
                    <img src="https://picsum.photos/seed/school2/200/200" alt="æ ¡å‹å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">ç»æµç³»å­¦éœ¸</div>
                        <div class="ranking-desc">å®Œæˆ16ä¸ªå­¦ä¹ ä»»åŠ¡ Â· ç†è®ºä¸“å®¶</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 13,890
                    </div>
                </div>
                
                <div class="ranking-item self-ranking">
                    <div class="ranking-rank">23</div>
                    <img src="https://picsum.photos/seed/currentuser/200/200" alt="ä½ çš„å¤´åƒ" class="ranking-avatar">
                    <div class="ranking-info">
                        <div class="ranking-name">æˆ‘ï¼ˆè‚¡ç¥¨æ–°æ‰‹ï¼‰</div>
                        <div class="ranking-desc">å®Œæˆ8ä¸ªå­¦ä¹ ä»»åŠ¡ Â· åˆçº§åˆ†æå¸ˆ</div>
                    </div>
                    <div class="ranking-score">
                        <i>ğŸ†</i> 8,640
                    </div>
                </div>
            </div>
        </div>
    </section>
        </div> <!-- ç»“æŸä¸»å†…å®¹åŒº -->
        
        <!-- è¾¹æ ï¼ˆå³ä¾§ä¸€æ ï¼Œæ¡Œé¢ç«¯æ˜¾ç¤ºï¼‰ -->
        <div class="hidden lg:block space-y-6">
            <!-- å¿«é€Ÿç»Ÿè®¡å¡ç‰‡ -->
            <section class="section">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="bar-chart" style="width: 20px; height: 20px;"></i>
                    ä»Šæ—¥ç»Ÿè®¡
                </h3>
                <div class="space-y-4">
                    <div style="padding: 12px; background: var(--light-blue); border-radius: 8px;">
                        <div style="font-size: 12px; color: var(--text-light); margin-bottom: 4px;">ä»Šæ—¥æ”¶ç›Š</div>
                        <div style="font-size: 20px; font-weight: 700; color: var(--stock-up);" id="today-profit">+Â¥1,234.56</div>
                    </div>
                    <div style="padding: 12px; background: var(--light-blue); border-radius: 8px;">
                        <div style="font-size: 12px; color: var(--text-light); margin-bottom: 4px;">å®Œæˆä»»åŠ¡</div>
                        <div style="font-size: 20px; font-weight: 700; color: var(--main-blue);">3/5</div>
                    </div>
                    <div style="padding: 12px; background: var(--light-blue); border-radius: 8px;">
                        <div style="font-size: 12px; color: var(--text-light); margin-bottom: 4px;">å­¦ä¹ æ—¶é•¿</div>
                        <div style="font-size: 20px; font-weight: 700; color: var(--main-blue);">45åˆ†é’Ÿ</div>
                    </div>
                </div>
            </section>
            
            <!-- å¿«æ·å…¥å£ -->
            <section class="section">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="zap" style="width: 20px; height: 20px;"></i>
                    å¿«æ·å…¥å£
                </h3>
                <div class="space-y-2">
                    <button class="task-action" onclick="navigateToPage('store', this)" style="width: 100%;">
                        <i data-lucide="shopping-bag" style="width: 16px; height: 16px;"></i>
                        è¿›å…¥å•†åŸ
                    </button>
                    <button class="task-action" onclick="navigateToPage('courses', this)" style="width: 100%;">
                        <i data-lucide="graduation-cap" style="width: 16px; height: 16px;"></i>
                        å­¦ä¹ è¯¾ç¨‹
                    </button>
                    <button class="task-action" onclick="startQuiz()" style="width: 100%;">
                        <i data-lucide="brain" style="width: 16px; height: 16px;"></i>
                        çŸ¥è¯†é—®ç­”
                    </button>
                </div>
            </section>
        </div>
    </div> <!-- ç»“æŸgridå¸ƒå±€ -->
    </div> <!-- ç»“æŸé¦–é¡µè§†å›¾ -->

    <!-- å•†åŸè§†å›¾ -->
    <div id="store-view" class="view-section">
        <section class="section">
            <h2 class="section-title">ğŸ›’ å•†åŸ</h2>
            <p class="section-desc">ä½¿ç”¨ç§¯åˆ†å…‘æ¢é“å…·å’Œå‚ä¸æ¨¡æ‹Ÿäº¤æ˜“</p>
            
            <!-- ç§¯åˆ†ä½™é¢æ˜¾ç¤º -->
            <div style="background: linear-gradient(135deg, var(--main-blue) 0%, var(--accent-blue) 100%); color: var(--white); border-radius: 12px; padding: 24px; margin-bottom: 24px; box-shadow: var(--shadow);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">æˆ‘çš„ç§¯åˆ†ä½™é¢</div>
                        <div style="font-size: 32px; font-weight: 700; color: var(--gold);" id="store-points-display">0</div>
                    </div>
                    <i data-lucide="coins" style="width: 48px; height: 48px; opacity: 0.3;"></i>
                </div>
            </div>

            <!-- æ¨¡æ‹Ÿè‚¡ç¥¨äº¤æ˜“ -->
            <section class="section" style="margin-bottom: 24px;">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="trending-up" style="width: 20px; height: 20px;"></i>
                    æ¨¡æ‹Ÿè‚¡ç¥¨äº¤æ˜“
                </h3>
                <div class="stock-list">
                    <div class="stock-row">
                        <div class="stock-name">
                            <span>ã€æ¨¡æ‹Ÿã€‘å…ƒå®‡å®™åŸºé‡‘</span>
                            <span class="stock-code">è™šæ‹Ÿäº¤æ˜“</span>
                        </div>
                        <div class="stock-price">100ç§¯åˆ†</div>
                        <button class="task-action" onclick="simulateBuyStock('å…ƒå®‡å®™åŸºé‡‘', 100)" style="min-width: 80px;">ä¹°å…¥</button>
                    </div>
                    <div class="stock-row">
                        <div class="stock-name">
                            <span>ã€æ¨¡æ‹Ÿã€‘AIç§‘æŠ€è‚¡</span>
                            <span class="stock-code">è™šæ‹Ÿäº¤æ˜“</span>
                        </div>
                        <div class="stock-price">120ç§¯åˆ†</div>
                        <button class="task-action" onclick="simulateBuyStock('AIç§‘æŠ€è‚¡', 120)" style="min-width: 80px;">ä¹°å…¥</button>
                    </div>
                    <div class="stock-row">
                        <div class="stock-name">
                            <span>ã€æ¨¡æ‹Ÿã€‘æ–°èƒ½æºETF</span>
                            <span class="stock-code">è™šæ‹Ÿäº¤æ˜“</span>
                        </div>
                        <div class="stock-price">150ç§¯åˆ†</div>
                        <button class="task-action" onclick="simulateBuyStock('æ–°èƒ½æºETF', 150)" style="min-width: 80px;">ä¹°å…¥</button>
                    </div>
                </div>
            </section>

            <!-- å® ç‰©é“å…·å…‘æ¢ -->
            <section class="section">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="gift" style="width: 20px; height: 20px;"></i>
                    å® ç‰©é“å…·å…‘æ¢
                </h3>
                <div class="tools-grid" style="grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));">
                    <div class="tool-item" onclick="buyItem('å¿ƒæƒ…è¯æ°´', 50)">
                        <div class="tool-icon">ğŸ’Š</div>
                        <div class="tool-name">å¿ƒæƒ…è¯æ°´</div>
                        <div class="tool-desc">å¿ƒæƒ…å€¼ç«‹å³å……æ»¡</div>
                        <div style="margin-top: 8px; color: var(--gold); font-weight: 600;">50 ç§¯åˆ†</div>
                    </div>
                    <div class="tool-item" onclick="buyItem('é«˜çº§è®­ç»ƒåˆ¸', 80)">
                        <div class="tool-icon">ğŸ«</div>
                        <div class="tool-name">é«˜çº§è®­ç»ƒåˆ¸</div>
                        <div class="tool-desc">è®­ç»ƒèƒ½åŠ›å€¼åŠ æˆ 2X</div>
                        <div style="margin-top: 8px; color: var(--gold); font-weight: 600;">80 ç§¯åˆ†</div>
                    </div>
                    <div class="tool-item" onclick="buyItem('ç»éªŒåŠ é€Ÿå™¨', 100)">
                        <div class="tool-icon">âš¡</div>
                        <div class="tool-name">ç»éªŒåŠ é€Ÿå™¨</div>
                        <div class="tool-desc">å®Œæˆä»»åŠ¡ç»éªŒ+50%</div>
                        <div style="margin-top: 8px; color: var(--gold); font-weight: 600;">100 ç§¯åˆ†</div>
                    </div>
                    <div class="tool-item" onclick="buyItem('èƒ½åŠ›æå‡å¡', 120)">
                        <div class="tool-icon">ğŸ“ˆ</div>
                        <div class="tool-name">èƒ½åŠ›æå‡å¡</div>
                        <div class="tool-desc">æ‰€æœ‰èƒ½åŠ›å€¼+10</div>
                        <div style="margin-top: 8px; color: var(--gold); font-weight: 600;">120 ç§¯åˆ†</div>
                    </div>
                    <div class="tool-item" onclick="buyItem('ç»éªŒåŠ é€Ÿè¯æ°´', 150)">
                        <div class="tool-icon">âš¡</div>
                        <div class="tool-name">ç»éªŒåŠ é€Ÿè¯æ°´</div>
                        <div class="tool-desc">å®Œæˆä»»åŠ¡ç»éªŒ+50%</div>
                        <div style="margin-top: 8px; color: var(--gold); font-weight: 600;">150 ç§¯åˆ†</div>
                    </div>
                    <div class="tool-item" onclick="buyItem('åŸºç¡€åˆ†ææ¨¡å—', 200)">
                        <div class="tool-icon">ğŸ§¾</div>
                        <div class="tool-name">åŸºç¡€åˆ†ææ¨¡å—</div>
                        <div class="tool-desc">è§£é”é«˜çº§åˆ†æåŠŸèƒ½</div>
                        <div style="margin-top: 8px; color: var(--gold); font-weight: 600;">200 ç§¯åˆ†</div>
                    </div>
                </div>
            </section>
        </section>
    </div>

    <!-- è¯¾ç¨‹è§†å›¾ -->
    <div id="courses-view" class="view-section">
        <section class="section">
            <h2 class="section-title">ğŸ“š è¯¾ç¨‹ä¸­å¿ƒ</h2>
            <p class="section-desc">AI IPå¯¼å¸ˆç²¾è®²è§†é¢‘ä¸æ·±åº¦é‡‘èæ–‡ç« </p>

            <!-- AI IPäººç‰©è®²è§£è§†é¢‘ -->
            <section class="section" style="margin-bottom: 24px;">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="video" style="width: 20px; height: 20px;"></i>
                    AI å¯¼å¸ˆç²¾è®²è§†é¢‘
                </h3>
                <div class="topic-list">
                    <div class="topic-item" onclick="playVideo('Kçº¿å›¾', 'conan')">
                        <div class="topic-header">
                            <div class="topic-title">
                                <img src="OIP.webp" alt="æŸ¯å—" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 12px; vertical-align: middle; display: inline-block; object-fit: cover;">
                                ã€æŸ¯å—ã€‘5åˆ†é’Ÿçœ‹æ‡‚Kçº¿å›¾
                            </div>
                            <div class="topic-time">5:15</div>
                        </div>
                        <div class="topic-content">å…¥é—¨çº§ Â· å­¦ä¹ Kçº¿åŸºç¡€å½¢æ€å’Œäº¤æ˜“ä¿¡å·è¯†åˆ«</div>
                        <div class="topic-footer">
                            <span>ğŸ‘ï¸ 1,234</span>
                            <span>â¤ï¸ 89</span>
                            <button class="reply-btn" style="margin-left: auto;">è§‚çœ‹</button>
                        </div>
                    </div>
                    <div class="topic-item" onclick="playVideo('è´¢æŠ¥ä¸‰è¡¨', 'doraemon')">
                        <div class="topic-header">
                            <div class="topic-title">
                                <img src="OIP(2).webp" alt="å“†å•¦Aæ¢¦" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 12px; vertical-align: middle; display: inline-block; object-fit: cover;" onerror="this.src='./doraemon.jpg'">
                                ã€å“†å•¦Aæ¢¦ã€‘è´¢æŠ¥ä¸‰è¡¨åŸºç¡€ç²¾è¯»
                            </div>
                            <div class="topic-time">12:40</div>
                        </div>
                        <div class="topic-content">è¿›é˜¶çº§ Â· æ·±å…¥ç†è§£èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨</div>
                        <div class="topic-footer">
                            <span>ğŸ‘ï¸ 2,567</span>
                            <span>â¤ï¸ 156</span>
                            <button class="reply-btn" style="margin-left: auto;">è§‚çœ‹</button>
                        </div>
                    </div>
                    <div class="topic-item" onclick="playVideo('é£é™©æ§åˆ¶', 'chikawa')">
                        <div class="topic-header">
                            <div class="topic-title">
                                <img src="OIP(3).webp" alt="Chikawa" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 12px; vertical-align: middle; display: inline-block; object-fit: cover;" onerror="this.src='./chikawa.jpg'">
                                ã€Chikawaã€‘é£é™©è¯†åˆ«ä¸æ­¢æŸç­–ç•¥
                            </div>
                            <div class="topic-time">8:30</div>
                        </div>
                        <div class="topic-content">è¿›é˜¶çº§ Â· å­¦ä¹ å¦‚ä½•è¯†åˆ«å¸‚åœºé£é™©å¹¶è®¾ç½®æ­¢æŸç‚¹</div>
                        <div class="topic-footer">
                            <span>ğŸ‘ï¸ 1,890</span>
                            <span>â¤ï¸ 112</span>
                            <button class="reply-btn" style="margin-left: auto;">è§‚çœ‹</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- é‡‘èå’¨è¯¢ä¸æ–‡ç«  -->
            <section class="section">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="file-text" style="width: 20px; height: 20px;"></i>
                    æ·±åº¦æ–‡ç« ä¸å’¨è¯¢
                </h3>
                <div class="topic-list">
                    <div class="topic-item" onclick="readArticle('ç¾è”å‚¨')">
                        <div class="topic-header">
                            <div class="topic-title">å®è§‚è§£è¯»ï¼šç¾è”å‚¨ä¸‹æ¬¡ä¼šè®®çš„é¢„æµ‹ä¸å½±å“</div>
                            <div class="topic-time">10åˆ†é’Ÿ</div>
                        </div>
                        <div class="topic-content">å®è§‚ç»æµ Â· åˆ†æç¾è”å‚¨æ”¿ç­–å¯¹å…¨çƒè‚¡å¸‚çš„å½±å“</div>
                        <div class="topic-footer">
                            <span>ğŸ“– é˜…è¯»</span>
                        </div>
                    </div>
                    <div class="topic-item" onclick="readArticle('æ–°èƒ½æº')">
                        <div class="topic-header">
                            <div class="topic-title">è¡Œä¸šå‰ç»ï¼šæ–°èƒ½æºè½¦ä¼çš„åˆ©æ¶¦æŒ‘æˆ˜</div>
                            <div class="topic-time">8åˆ†é’Ÿ</div>
                        </div>
                        <div class="topic-content">è¡Œä¸šåˆ†æ Â· æ·±å…¥æ¢è®¨æ–°èƒ½æºè¡Œä¸šçš„å‘å±•è¶‹åŠ¿</div>
                        <div class="topic-footer">
                            <span>ğŸ“– é˜…è¯»</span>
                        </div>
                    </div>
                    <div class="topic-item" onclick="readArticle('AIæŠ•èµ„')">
                        <div class="topic-header">
                            <div class="topic-title">æŠ•èµ„ç­–ç•¥ï¼šAIæ—¶ä»£çš„æŠ•èµ„æœºä¼šä¸é£é™©</div>
                            <div class="topic-time">12åˆ†é’Ÿ</div>
                        </div>
                        <div class="topic-content">æŠ•èµ„ç­–ç•¥ Â· æŠŠæ¡AIäº§ä¸šçš„æŠ•èµ„æœºé‡</div>
                        <div class="topic-footer">
                            <span>ğŸ“– é˜…è¯»</span>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </div>

    <!-- æˆ‘çš„è§†å›¾ -->
    <div id="my-view" class="view-section">
        <section class="section">
            <h2 class="section-title">ğŸ‘¤ æˆ‘çš„</h2>
            <p class="section-desc">è´¦æˆ·è®¾ç½®ä¸ä¸ªäººä¿¡æ¯ç®¡ç†</p>

            <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
            <div style="background-color: var(--white); border-radius: 12px; padding: 24px; margin-bottom: 24px; box-shadow: var(--shadow); text-align: center;">
                <img id="my-avatar-img" src="https://picsum.photos/seed/user/200/200" alt="ç”¨æˆ·å¤´åƒ" class="pet-avatar" style="width: 100px; height: 100px; margin: 0 auto 16px;">
                <div class="pet-name" style="font-size: 20px; margin-bottom: 8px;">æ˜µç§°: <span id="my-nickname-display">é‡‘èæ–°æ‰‹</span></div>
                <div class="pet-level" style="margin-bottom: 16px;">ç”¨æˆ·ID: <span id="my-full-user-id-display">Loading...</span></div>
                <button class="pet-action" onclick="editProfile()" style="margin: 0 auto;">
                    <i data-lucide="edit" style="width: 16px; height: 16px;"></i>
                    <span>æ›´æ”¹æ˜µç§°/å¤´åƒ</span>
                </button>
            </div>

            <!-- è´¦æˆ·è®¾ç½® -->
            <section class="section" style="margin-bottom: 24px;">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="settings" style="width: 20px; height: 20px;"></i>
                    è´¦æˆ·è®¾ç½®
                </h3>
                <div class="task-list">
                    <div class="task-item" onclick="openSettings('notification')" style="cursor: pointer;">
                        <div class="task-info">
                            <div class="task-title">æ¶ˆæ¯é€šçŸ¥è®¾ç½®</div>
                            <div class="task-desc">ç®¡ç†æ¨é€é€šçŸ¥å’Œæé†’</div>
                        </div>
                        <i data-lucide="chevron-right" style="width: 20px; height: 20px; color: var(--text-light);"></i>
                    </div>
                    <div class="task-item" onclick="openSettings('privacy')" style="cursor: pointer;">
                        <div class="task-info">
                            <div class="task-title">éšç§ä¸å®‰å…¨</div>
                            <div class="task-desc">ç®¡ç†è´¦æˆ·éšç§è®¾ç½®</div>
                        </div>
                        <i data-lucide="chevron-right" style="width: 20px; height: 20px; color: var(--text-light);"></i>
                    </div>
                    <div class="task-item" onclick="clearCache()" style="cursor: pointer;">
                        <div class="task-info">
                            <div class="task-title">æ¸…é™¤ç¼“å­˜</div>
                            <div class="task-desc">12.5 MB</div>
                        </div>
                        <i data-lucide="chevron-right" style="width: 20px; height: 20px; color: var(--text-light);"></i>
                    </div>
                    <div class="task-item" onclick="logout()" style="cursor: pointer; border-color: var(--stock-down);">
                        <div class="task-info">
                            <div class="task-title" style="color: var(--stock-down);">é€€å‡ºç™»å½•</div>
                            <div class="task-desc">å®‰å…¨é€€å‡ºå½“å‰è´¦æˆ·</div>
                        </div>
                        <i data-lucide="log-out" style="width: 20px; height: 20px; color: var(--stock-down);"></i>
                    </div>
                </div>
            </section>

            <!-- ç›¸å…³ä¿¡æ¯ -->
            <section class="section">
                <h3 class="section-title" style="font-size: 18px; margin-bottom: 16px;">
                    <i data-lucide="help-circle" style="width: 20px; height: 20px;"></i>
                    å¸®åŠ©ä¸æ”¯æŒ
                </h3>
                <div class="task-list">
                    <div class="task-item" onclick="showHelp('faq')" style="cursor: pointer;">
                        <div class="task-info">
                            <div class="task-title">å¸¸è§é—®é¢˜è§£ç­”</div>
                            <div class="task-desc">æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©å’Œå¸¸è§é—®é¢˜</div>
                        </div>
                        <i data-lucide="chevron-right" style="width: 20px; height: 20px; color: var(--text-light);"></i>
                    </div>
                    <div class="task-item" onclick="showHelp('terms')" style="cursor: pointer;">
                        <div class="task-info">
                            <div class="task-title">æœåŠ¡æ¡æ¬¾ä¸éšç§æ”¿ç­–</div>
                            <div class="task-desc">äº†è§£æˆ‘ä»¬çš„æœåŠ¡æ¡æ¬¾</div>
                        </div>
                        <i data-lucide="chevron-right" style="width: 20px; height: 20px; color: var(--text-light);"></i>
                    </div>
                </div>
            </section>
        </section>
    </div>

    <!-- é¡µè„š -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">å…³äºæˆ‘ä»¬</a>
                <a href="#">å­¦ä¹ èµ„æ–™</a>
                <a href="#">ç”¨æˆ·åè®®</a>
                <a href="#">éšç§æ”¿ç­–</a>
                <a href="#">è”ç³»æˆ‘ä»¬</a>
            </div>
            <p>Â© 2025 FinZooé‡‘èä¹å›­ - è‚¡ç¥¨å­¦ä¹ æ¨¡æ‹Ÿå¹³å° | å…è´£å£°æ˜ï¼šæœ¬å¹³å°ä»…ç”¨äºå­¦ä¹ ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®</p>
        </div>
    </footer>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="navigateToPage('home', this)">
            <i data-lucide="home" class="nav-item-icon"></i>
            <span class="nav-item-label">é¦–é¡µ</span>
        </div>
        <div class="nav-item" onclick="navigateToPage('store', this)">
            <i data-lucide="shopping-bag" class="nav-item-icon"></i>
            <span class="nav-item-label">å•†åŸ</span>
        </div>
        <div class="nav-item" onclick="navigateToPage('courses', this)">
            <i data-lucide="graduation-cap" class="nav-item-icon"></i>
            <span class="nav-item-label">è¯¾ç¨‹</span>
        </div>
        <div class="nav-item" onclick="navigateToPage('my', this)">
            <i data-lucide="user" class="nav-item-icon"></i>
            <span class="nav-item-label">æˆ‘çš„</span>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div class="toast" id="toast"></div>

    <script>
        // å…¨å±€å˜é‡
        let currentUserId = null;
        let petData = {
            level: 4,
            mood: 75,
            analysisAbility: 65,
            marketSensitivity: 48,
            riskRecognition: 52,
            points: 8640,
            experience: 600, // å½“å‰ç»éªŒå€¼
            activityLog: []
        };

        // Firebase åˆå§‹åŒ–
        async function initFirebase() {
            try {
                const { signInAnonymously } = window.firebaseFunctions;
                const auth = window.firebaseAuth;
                
                // å°è¯•åŒ¿åç™»å½•
                const userCredential = await signInAnonymously(auth);
                currentUserId = userCredential.user.uid;
                
                // æ›´æ–°ç”¨æˆ·IDæ˜¾ç¤ºï¼ˆè„±æ•å¤„ç†ï¼‰
                const maskedUserId = currentUserId.substring(0, 8) + '...';
                document.getElementById('statusUserId').textContent = `ç”¨æˆ·: ${maskedUserId}`;
                
                // åŠ è½½ç”¨æˆ·æ•°æ®
                await loadUserData();
                
                // ç›‘å¬æ•°æ®å˜åŒ–
                setupDataListener();
            } catch (error) {
                console.error('Firebase åˆå§‹åŒ–å¤±è´¥:', error);
                // ä½¿ç”¨æœ¬åœ°å­˜å‚¨ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ
                loadFromLocalStorage();
            }
        }

        // åŠ è½½ç”¨æˆ·æ•°æ®
        async function loadUserData() {
            try {
                const { getDoc, doc } = window.firebaseFunctions;
                const db = window.firebaseDb;
                
                if (!currentUserId) return;
                
                const userDocRef = doc(db, 'artifacts', 'finzoo', 'users', currentUserId, 'petData', 'mainPet');
                const docSnap = await getDoc(userDocRef);
                
                if (docSnap.exists()) {
                    petData = { ...petData, ...docSnap.data() };
                } else {
                    // åˆ›å»ºåˆå§‹æ•°æ®
                    await saveUserData();
                }
                
                updateUI();
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                loadFromLocalStorage();
            }
        }

        // ä¿å­˜ç”¨æˆ·æ•°æ®
        async function saveUserData() {
            try {
                const { setDoc, doc } = window.firebaseFunctions;
                const db = window.firebaseDb;
                
                if (!currentUserId) {
                    saveToLocalStorage();
                    return;
                }
                
                const userDocRef = doc(db, 'artifacts', 'finzoo', 'users', currentUserId, 'petData', 'mainPet');
                await setDoc(userDocRef, petData, { merge: true });
            } catch (error) {
                console.error('ä¿å­˜æ•°æ®å¤±è´¥:', error);
                saveToLocalStorage();
            }
        }

        // è®¾ç½®æ•°æ®ç›‘å¬
        function setupDataListener() {
            try {
                const { onSnapshot, doc } = window.firebaseFunctions;
                const db = window.firebaseDb;
                
                if (!currentUserId) return;
                
                const userDocRef = doc(db, 'artifacts', 'finzoo', 'users', currentUserId, 'petData', 'mainPet');
                onSnapshot(userDocRef, (docSnap) => {
                    if (docSnap.exists()) {
                        petData = { ...petData, ...docSnap.data() };
                        updateUI();
                    }
                });
            } catch (error) {
                console.error('æ•°æ®ç›‘å¬å¤±è´¥:', error);
            }
        }

        // æœ¬åœ°å­˜å‚¨å¤‡ç”¨æ–¹æ¡ˆ
        function saveToLocalStorage() {
            try {
                localStorage.setItem('finzoo_petData', JSON.stringify(petData));
            } catch (error) {
                console.error('æœ¬åœ°å­˜å‚¨å¤±è´¥:', error);
            }
        }

        function loadFromLocalStorage() {
            try {
                const saved = localStorage.getItem('finzoo_petData');
                if (saved) {
                    petData = { ...petData, ...JSON.parse(saved) };
                    updateUI();
                }
            } catch (error) {
                console.error('è¯»å–æœ¬åœ°å­˜å‚¨å¤±è´¥:', error);
            }
        }

        // æ·»åŠ æ´»åŠ¨æ—¥å¿—
        function addActivityLog(action, description) {
            const now = new Date();
            const timeStr = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            const logEntry = {
                time: timeStr,
                action: action,
                description: description,
                timestamp: now.getTime()
            };
            
            // æ·»åŠ åˆ°æ—¥å¿—æ•°ç»„ï¼ˆæœ€å¤šä¿ç•™20æ¡ï¼‰
            petData.activityLog = petData.activityLog || [];
            petData.activityLog.unshift(logEntry);
            if (petData.activityLog.length > 20) {
                petData.activityLog = petData.activityLog.slice(0, 20);
            }
            
            saveUserData();
            updateActivityLog();
        }

        // æ›´æ–°æ´»åŠ¨æ—¥å¿—æ˜¾ç¤º
        function updateActivityLog() {
            const logList = document.getElementById('activityLogList');
            if (!logList) return;
            
            const logs = petData.activityLog || [];
            
            if (logs.length === 0) {
                logList.innerHTML = `
                    <div class="activity-item">
                        <span class="activity-time">--:--</span>
                        <i data-lucide="info" class="activity-icon"></i>
                        <span>æš‚æ— æ´»åŠ¨è®°å½•</span>
                    </div>
                `;
            } else {
                logList.innerHTML = logs.slice(0, 5).map(log => {
                    const iconMap = {
                        'feed': 'utensils',
                        'train': 'book-open',
                        'task': 'check-circle',
                        'interact': 'heart',
                        'default': 'info'
                    };
                    const icon = iconMap[log.action] || iconMap.default;
                    
                    return `
                        <div class="activity-item">
                            <span class="activity-time">${log.time}</span>
                            <i data-lucide="${icon}" class="activity-icon"></i>
                            <span>${log.description}</span>
                        </div>
                    `;
                }).join('');
            }
            
            // é‡æ–°åˆå§‹åŒ–å›¾æ ‡
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // æ›´æ–°çŠ¶æ€æ¡é¢œè‰²
        function updateStatBarColor(statElement, value) {
            if (!statElement) return;
            
            const fillElement = statElement.querySelector('.stat-fill');
            if (!fillElement) return;
            
            // ç§»é™¤æ‰€æœ‰é¢œè‰²ç±»
            fillElement.classList.remove('high', 'medium', 'low');
            
            // æ ¹æ®æ•°å€¼æ·»åŠ é¢œè‰²ç±»
            if (value >= 70) {
                fillElement.classList.add('high');
            } else if (value >= 40) {
                fillElement.classList.add('medium');
            } else {
                fillElement.classList.add('low');
            }
        }

        // æ›´æ–°å¿ƒæƒ…å›¾æ ‡
        function updateMoodIcon(mood) {
            const moodIcon = document.getElementById('moodIcon');
            if (!moodIcon) return;
            
            if (mood >= 80) {
                moodIcon.textContent = 'ğŸ˜„';
            } else if (mood >= 60) {
                moodIcon.textContent = 'ğŸ˜Š';
            } else if (mood >= 40) {
                moodIcon.textContent = 'ğŸ˜';
            } else if (mood >= 20) {
                moodIcon.textContent = 'ğŸ˜Ÿ';
            } else {
                moodIcon.textContent = 'ğŸ˜¢';
            }
        }

        // æ›´æ–°UI
        function updateUI() {
            // æ›´æ–°ç§¯åˆ†
            const pointsElement = document.getElementById('statusPoints');
            if (pointsElement) {
                pointsElement.textContent = petData.points || 0;
            }
            
            // æ›´æ–°å® ç‰©ç­‰çº§
            const levelElement = document.getElementById('petLevel');
            if (levelElement) {
                levelElement.textContent = petData.level || 4;
            }
            
            // æ›´æ–°ç»éªŒå€¼ï¼ˆç®€åŒ–è®¡ç®—ï¼šæ¯çº§éœ€è¦ 200 ç»éªŒï¼‰
            const expNeededElement = document.getElementById('petExpNeeded');
            if (expNeededElement) {
                const currentExp = petData.experience || 0;
                const expNeeded = 200 - (currentExp % 200);
                expNeededElement.textContent = expNeeded;
            }
            
            // æ›´æ–°å¿ƒæƒ…å€¼
            const mood = petData.mood || 75;
            const moodValueElement = document.getElementById('moodValue');
            const moodBarElement = document.getElementById('moodBar');
            if (moodValueElement) {
                moodValueElement.textContent = mood;
            }
            if (moodBarElement) {
                moodBarElement.style.width = `${mood}%`;
                updateStatBarColor(moodBarElement.parentElement.parentElement, mood);
            }
            updateMoodIcon(mood);
            
            // æ›´æ–°çŠ¶æ€æ¡
            const stats = [
                { name: 'åˆ†æèƒ½åŠ›', value: petData.analysisAbility || 65, element: document.querySelectorAll('.pet-stat')[0] },
                { name: 'å¸‚åœºæ•æ„Ÿåº¦', value: petData.marketSensitivity || 48, element: document.querySelectorAll('.pet-stat')[1] },
                { name: 'é£é™©è¯†åˆ«', value: petData.riskRecognition || 52, element: document.querySelectorAll('.pet-stat')[2] }
            ];
            
            stats.forEach(stat => {
                if (stat.element) {
                    const valueElement = stat.element.querySelector('.stat-value');
                    const fillElement = stat.element.querySelector('.stat-fill');
                    
                    if (valueElement) {
                        valueElement.textContent = `${stat.value}/100`;
                    }
                    if (fillElement) {
                        fillElement.style.width = `${stat.value}%`;
                        updateStatBarColor(stat.element, stat.value);
                    }
                }
            });
            
            // æ›´æ–°æ´»åŠ¨æ—¥å¿—
            updateActivityLog();
        }

        // ä»»åŠ¡ç­›é€‰åˆ‡æ¢
        function switchTaskFilter(filterType, element) {
            // æ›´æ–°ç­›é€‰å™¨çŠ¶æ€
            document.querySelectorAll('.task-filter').forEach(filter => {
                filter.classList.remove('active');
            });
            element.classList.add('active');
            
            // åˆ‡æ¢ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤º
            const beginnerTasks = document.getElementById('beginnerTasks');
            const advancedTasks = document.getElementById('advancedTasks');
            
            if (filterType === 'beginner') {
                if (beginnerTasks) beginnerTasks.style.display = 'grid';
                if (advancedTasks) advancedTasks.style.display = 'none';
            } else {
                if (beginnerTasks) beginnerTasks.style.display = 'none';
                if (advancedTasks) advancedTasks.style.display = 'grid';
            }
        }

        // åº•éƒ¨å¯¼èˆª - è§†å›¾åˆ‡æ¢ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼Œä¿®å¤å¡é¡¿ï¼‰
        let isNavigating = false; // é˜²æ­¢é‡å¤ç‚¹å‡»
        
        function navigateToPage(page, element) {
            // é˜²æ­¢é‡å¤ç‚¹å‡»å’Œå¡é¡¿
            if (isNavigating) {
                return;
            }
            
            // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰æ¿€æ´»çš„å¯¼èˆªé¡¹ï¼Œç›´æ¥è¿”å›
            if (element && element.classList.contains('active')) {
                return;
            }
            
            isNavigating = true;
            
            // ç«‹å³æ›´æ–°å¯¼èˆªçŠ¶æ€ï¼ˆè§†è§‰åé¦ˆï¼‰
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            if (element) {
                element.classList.add('active');
            }
            
            // éšè—æ‰€æœ‰è§†å›¾
            const allViews = document.querySelectorAll('.view-section');
            allViews.forEach(view => {
                view.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡è§†å›¾
            const targetView = document.getElementById(`${page}-view`);
            if (targetView) {
                // ç›´æ¥æ˜¾ç¤ºï¼Œä¸ä½¿ç”¨å»¶è¿Ÿï¼ˆå‡å°‘å¡é¡¿ï¼‰
                targetView.classList.add('active');
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'instant' });
                
                // æ›´æ–°ç‰¹å®šè§†å›¾çš„æ•°æ®
                if (page === 'store') {
                    const storePoints = document.getElementById('store-points-display');
                    if (storePoints) {
                        storePoints.textContent = petData.points || 0;
                    }
                }
                if (page === 'my') {
                    const myUserId = document.getElementById('my-full-user-id-display');
                    if (myUserId) {
                        if (currentUserId) {
                            myUserId.textContent = currentUserId.substring(0, 12) + '...';
                        } else {
                            myUserId.textContent = 'æœªç™»å½•';
                        }
                    }
                }
                
                // å»¶è¿Ÿé‡æ–°åˆå§‹åŒ–å›¾æ ‡ï¼ˆé¿å…é˜»å¡ï¼‰
                setTimeout(() => {
                    if (typeof lucide !== 'undefined') {
                        lucide.createIcons();
                    }
                    isNavigating = false;
                    
                    // æ ¹æ®é¡µé¢åˆ‡æ¢å¼¹å¹•ç³»ç»Ÿ
                    initDanmaku();
                }, 50);
            } else {
                console.error(`è§†å›¾ ${page}-view ä¸å­˜åœ¨`);
                showToast('é¡µé¢åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•');
                isNavigating = false;
            }
        }

        // æ¨¡æ‹Ÿä¹°å…¥è‚¡ç¥¨
        async function simulateBuyStock(stockName, cost) {
            if ((petData.points || 0) < cost) {
                showToast(`ç§¯åˆ†ä¸è¶³ï¼éœ€è¦${cost}ç§¯åˆ†ï¼Œå½“å‰${petData.points || 0}ç§¯åˆ†`);
                return;
            }
            
            petData.points = (petData.points || 0) - cost;
            addActivityLog('task', `æ¨¡æ‹Ÿä¹°å…¥${stockName}ï¼Œæ¶ˆè€—${cost}ç§¯åˆ†`);
            await saveUserData();
            updateUI();
            
            const storePoints = document.getElementById('store-points-display');
            if (storePoints) {
                storePoints.textContent = petData.points || 0;
            }
            
            showToast(`æˆåŠŸä¹°å…¥${stockName}ï¼æ¶ˆè€—${cost}ç§¯åˆ†`);
        }

        // è´­ä¹°é“å…·
        async function buyItem(itemName, cost) {
            if ((petData.points || 0) < cost) {
                showToast(`ç§¯åˆ†ä¸è¶³ï¼éœ€è¦${cost}ç§¯åˆ†`);
                return;
            }
            
            petData.points = (petData.points || 0) - cost;
            
            // æ ¹æ®é“å…·ç±»å‹åº”ç”¨æ•ˆæœ
            if (itemName === 'å¿ƒæƒ…è¯æ°´') {
                petData.mood = 100;
                addActivityLog('feed', `ä½¿ç”¨å¿ƒæƒ…è¯æ°´ï¼Œå¿ƒæƒ…å€¼å……æ»¡`);
            } else if (itemName === 'èƒ½åŠ›æå‡å¡') {
                petData.analysisAbility = Math.min(100, (petData.analysisAbility || 65) + 10);
                petData.marketSensitivity = Math.min(100, (petData.marketSensitivity || 48) + 10);
                petData.riskRecognition = Math.min(100, (petData.riskRecognition || 52) + 10);
                addActivityLog('train', `ä½¿ç”¨èƒ½åŠ›æå‡å¡ï¼Œæ‰€æœ‰èƒ½åŠ›+10`);
            } else if (itemName === 'ç»éªŒåŠ é€Ÿè¯æ°´') {
                // è®¾ç½®ç»éªŒåŠ é€Ÿæ ‡è®°ï¼ˆä¸‹æ¬¡å®Œæˆä»»åŠ¡æ—¶ç”Ÿæ•ˆï¼‰
                petData.expBoost = true;
                addActivityLog('task', `ä½¿ç”¨ç»éªŒåŠ é€Ÿè¯æ°´ï¼Œä¸‹æ¬¡ä»»åŠ¡ç»éªŒ+50%`);
            } else if (itemName === 'åŸºç¡€åˆ†ææ¨¡å—') {
                petData.analysisAbility = Math.min(100, (petData.analysisAbility || 65) + 15);
                petData.hasAnalysisModule = true;
                addActivityLog('train', `è§£é”åŸºç¡€åˆ†ææ¨¡å—ï¼Œåˆ†æèƒ½åŠ›+15`);
            }
            
            await saveUserData();
            updateUI();
            
            const storePoints = document.getElementById('store-points-display');
            if (storePoints) {
                storePoints.textContent = petData.points || 0;
            }
            
            showToast(`${itemName}è´­ä¹°æˆåŠŸï¼`);
        }

        // æ’­æ”¾è§†é¢‘
        function playVideo(title, ip) {
            showToast(`å¼€å§‹æ’­æ”¾ã€${title}ã€‘è§†é¢‘...`);
            addActivityLog('task', `è§‚çœ‹äº†${title}è§†é¢‘`);
        }

        // é˜…è¯»æ–‡ç« 
        function readArticle(title) {
            showToast(`æ­£åœ¨åŠ è½½ã€Š${title}ã€‹æ–‡ç« ...`);
            addActivityLog('task', `é˜…è¯»äº†${title}æ–‡ç« `);
        }

        // ç¼–è¾‘ä¸ªäººèµ„æ–™
        function editProfile() {
            const newNickname = prompt('è¯·è¾“å…¥æ–°æ˜µç§°ï¼š', document.getElementById('my-nickname-display').textContent);
            if (newNickname && newNickname.trim()) {
                document.getElementById('my-nickname-display').textContent = newNickname.trim();
                showToast('æ˜µç§°ä¿®æ”¹æˆåŠŸï¼');
            }
        }

        // æ‰“å¼€è®¾ç½®
        function openSettings(type) {
            if (type === 'notification') {
                showToast('è¿›å…¥æ¶ˆæ¯é€šçŸ¥è®¾ç½®');
            } else if (type === 'privacy') {
                showToast('è¿›å…¥éšç§ä¸å®‰å…¨è®¾ç½®');
            }
        }

        // æ¸…é™¤ç¼“å­˜
        function clearCache() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤ç¼“å­˜å—ï¼Ÿ')) {
                showToast('ç¼“å­˜æ¸…é™¤æˆåŠŸï¼');
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                showToast('é€€å‡ºç™»å½•æˆåŠŸ');
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„ç™»å‡ºé€»è¾‘
            }
        }

        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp(type) {
            if (type === 'faq') {
                showToast('æŸ¥çœ‹å¸¸è§é—®é¢˜è§£ç­”');
            } else if (type === 'terms') {
                showToast('æŸ¥çœ‹æœåŠ¡æ¡æ¬¾ä¸éšç§æ”¿ç­–');
            }
        }

        // æ›´æ–°å¼¹çª—åŠ¨æ€å†…å®¹
        function updateWelcomeModal() {
            // æ›´æ–°ä»Šæ—¥æ”¶ç›Š
            const dailyProfit = document.getElementById('daily-profit');
            if (dailyProfit) {
                const profit = (Math.random() * 2000 + 500).toFixed(2);
                dailyProfit.textContent = `+Â¥${profit}`;
            }
            
            // æ›´æ–°çƒ­é—¨è¯é¢˜
            const dailyTopic = document.getElementById('daily-topic');
            if (dailyTopic) {
                const topics = [
                    'å¤®è¡Œé™å‡†å¯¹è‚¡å¸‚çš„å½±å“åˆ†æ - 987äººå‚ä¸è®¨è®º',
                    'AIæŠ•èµ„ç­–ç•¥æ–°è¶‹åŠ¿ - 1,234äººå‚ä¸è®¨è®º',
                    'æ–°èƒ½æºæ¿å—æŠ•èµ„æœºä¼š - 856äººå‚ä¸è®¨è®º',
                    'ç¾è”å‚¨æ”¿ç­–è§£è¯» - 2,156äººå‚ä¸è®¨è®º'
                ];
                dailyTopic.textContent = topics[Math.floor(Math.random() * topics.length)];
            }
            
            // æ›´æ–°å® ç‰©é—®å€™
            const petGreeting = document.getElementById('pet-greeting');
            if (petGreeting) {
                const mood = petData.mood || 75;
                const greetings = [
                    `ä¸»äººï¼Œä»Šå¤©ä¹Ÿè¦åŠªåŠ›å­¦ä¹ é‡‘èçŸ¥è¯†å“¦ï¼æˆ‘çš„å¿ƒæƒ…å€¼${mood}ï¼Œéšæ—¶å¯ä»¥å¼€å§‹è®­ç»ƒ~`,
                    `ä»Šå¤©å¤©æ°”çœŸå¥½ï¼æˆ‘çš„å¿ƒæƒ…å€¼${mood}ï¼Œè®©æˆ‘ä»¬å¼€å§‹æ–°çš„å­¦ä¹ ä¹‹æ—…å§ï¼`,
                    `ä¸»äººï¼Œæˆ‘å·²ç»å‡†å¤‡å¥½å­¦ä¹ äº†ï¼å¿ƒæƒ…å€¼${mood}ï¼ŒçŠ¶æ€æ»¡æ»¡ï¼`,
                    `æ–°çš„ä¸€å¤©ï¼Œæ–°çš„å¼€å§‹ï¼æˆ‘çš„å¿ƒæƒ…å€¼${mood}ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼`
                ];
                petGreeting.textContent = greetings[Math.floor(Math.random() * greetings.length)];
            }
        }

        // å¼¹å¹•ç³»ç»Ÿ
        const danmakuMessages = {
            profit: [
                { icon: 'ğŸ’°', text: 'ä»Šæ—¥æ”¶ç›Š +Â¥1,234.56', type: 'profit' },
                { icon: 'ğŸ“ˆ', text: 'æŒä»“è‚¡ç¥¨ä¸Šæ¶¨ +5.2%', type: 'profit' },
                { icon: 'ğŸ’µ', text: 'ç´¯è®¡æ”¶ç›Šçªç ´ 10,000å…ƒ', type: 'profit' },
                { icon: 'ğŸ‰', text: 'æ¨¡æ‹Ÿäº¤æ˜“ç›ˆåˆ© +Â¥856.78', type: 'profit' },
                { icon: 'ğŸ’', text: 'æŠ•èµ„æ”¶ç›Šå¢é•¿ +3.5%', type: 'profit' }
            ],
            friend: [
                { icon: 'ğŸ‘¥', text: 'å¥½å‹å°æ˜ï¼šä½ çš„åˆ†æå¾ˆä¸“ä¸šï¼', type: 'friend' },
                { icon: 'ğŸ’¬', text: 'å°çº¢å›å¤äº†ä½ çš„å¸–å­', type: 'friend' },
                { icon: 'ğŸ‘', text: 'å¥½å‹å°ç‹ç‚¹èµäº†ä½ çš„æŠ•èµ„ç»„åˆ', type: 'friend' },
                { icon: 'â­', text: 'å¥½å‹ç‚¹èµäº†ä½ çš„è‚¡ç¥¨åˆ†æ', type: 'friend' },
                { icon: 'ğŸ¯', text: 'å¥½å‹é‚€è¯·ä½ å‚ä¸æŠ•èµ„æŒ‘æˆ˜', type: 'friend' }
            ],
            pet: [
                { icon: 'ğŸ¾', text: 'è‚¡å°æ¢ï¼šä¸»äººï¼Œä»Šå¤©ä¹Ÿè¦åŠªåŠ›å­¦ä¹ å“¦ï¼', type: 'pet' },
                { icon: 'ğŸ˜Š', text: 'è‚¡å°æ¢å¿ƒæƒ…å€¼100ï¼ŒçŠ¶æ€æ»¡æ»¡ï¼', type: 'pet' },
                { icon: 'ğŸ“', text: 'è‚¡å°æ¢ï¼šå®Œæˆäº†æ–°ä»»åŠ¡ï¼Œè·å¾—ç»éªŒ+50', type: 'pet' },
                { icon: 'ğŸ’ª', text: 'è‚¡å°æ¢ï¼šè®­ç»ƒå®Œæˆï¼Œèƒ½åŠ›å€¼æå‡äº†ï¼', type: 'pet' },
                { icon: 'ğŸŒŸ', text: 'è‚¡å°æ¢å‡çº§äº†ï¼ç­‰çº§+1', type: 'pet' }
            ],
            hot: [
                { icon: 'ğŸ”¥', text: 'çƒ­é—¨è¯é¢˜ï¼šå¤®è¡Œé™å‡†å¯¹è‚¡å¸‚çš„å½±å“', type: 'hot' },
                { icon: 'ğŸ“°', text: 'é‡‘èçƒ­ç‚¹ï¼šAIæŠ•èµ„ç­–ç•¥æ–°è¶‹åŠ¿', type: 'hot' },
                { icon: 'ğŸ’¼', text: 'å¸‚åœºåŠ¨æ€ï¼šæ–°èƒ½æºæ¿å—å¼‚åŠ¨', type: 'hot' },
                { icon: 'ğŸŒ', text: 'å…¨çƒè´¢ç»ï¼šç¾è”å‚¨æ”¿ç­–è§£è¯»', type: 'hot' },
                { icon: 'ğŸ“Š', text: 'è¡Œæƒ…é€Ÿé€’ï¼šAè‚¡ä¸‰å¤§æŒ‡æ•°ä¸Šæ¶¨', type: 'hot' }
            ]
        };

        // è·Ÿè¸ªå¼¹å¹•è½¨é“ï¼Œé¿å…é‡å 
        const danmakuTracks = [];
        const trackCount = 8; // 8æ¡è½¨é“
        
        function initDanmakuTracks() {
            const container = document.getElementById('danmakuContainer');
            if (!container) return;
            const containerHeight = container.offsetHeight;
            const trackHeight = containerHeight / trackCount;
            
            for (let i = 0; i < trackCount; i++) {
                danmakuTracks.push({
                    top: i * trackHeight + 15,
                    lastEndTime: 0
                });
            }
        }

        function getAvailableTrack() {
            const now = Date.now();
            // æ‰¾åˆ°æœ€ä¹…æ²¡æœ‰ä½¿ç”¨å¼¹å¹•çš„è½¨é“
            let availableTrack = 0;
            let minTime = danmakuTracks[0].lastEndTime;
            
            for (let i = 1; i < danmakuTracks.length; i++) {
                if (danmakuTracks[i].lastEndTime < minTime) {
                    minTime = danmakuTracks[i].lastEndTime;
                    availableTrack = i;
                }
            }
            
            // å¦‚æœè½¨é“åˆšç”¨å®Œï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´
            if (danmakuTracks[availableTrack].lastEndTime > now - 3000) {
                availableTrack = Math.floor(Math.random() * danmakuTracks.length);
            }
            
            return availableTrack;
        }

        function createDanmaku(message) {
            const container = document.getElementById('danmakuContainer');
            if (!container) return;

            const danmaku = document.createElement('div');
            danmaku.className = `danmaku-item danmaku-${message.type}`;
            
            const icon = document.createElement('span');
            icon.className = 'danmaku-icon';
            icon.textContent = message.icon;
            
            const text = document.createElement('span');
            text.textContent = message.text;
            
            danmaku.appendChild(icon);
            danmaku.appendChild(text);
            
            // é€‰æ‹©å¯ç”¨è½¨é“
            const trackIndex = getAvailableTrack();
            const track = danmakuTracks[trackIndex];
            danmaku.style.top = `${track.top}px`;
            
            // è®¾ç½®åˆå§‹ä½ç½®åœ¨å±å¹•å³ä¾§å¤–éƒ¨
            danmaku.style.left = '100%';
            danmaku.style.transform = 'translateX(0)';
            
            container.appendChild(danmaku);
            
            // å¼ºåˆ¶é‡æ’ä»¥ç¡®ä¿æ­£ç¡®è®¡ç®—å®½åº¦
            const textWidth = danmaku.offsetWidth || 200;
            const screenWidth = window.innerWidth;
            const distance = screenWidth + textWidth;
            const speed = 80; // åƒç´ /ç§’ï¼Œç±»ä¼¼è§†é¢‘å¼¹å¹•é€Ÿåº¦
            const duration = (distance / speed) * 1000; // è½¬æ¢ä¸ºæ¯«ç§’
            
            // å¯åŠ¨ä»å³åˆ°å·¦çš„åŠ¨ç”»ï¼ˆä¸€æ¡ä¸€æ¡é£˜è¿‡å»ï¼‰
            requestAnimationFrame(() => {
                danmaku.style.transition = `transform ${duration}ms linear`;
                danmaku.style.transform = `translateX(-${distance}px)`;
            });
            
            // æ›´æ–°è½¨é“æœ€åä½¿ç”¨æ—¶é—´
            track.lastEndTime = Date.now() + duration;
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                if (danmaku.parentNode) {
                    danmaku.parentNode.removeChild(danmaku);
                }
            }, duration + 100);
        }

        function startDanmaku() {
            // åªåœ¨é¦–é¡µæ˜¾ç¤ºå¼¹å¹•
            const homeView = document.getElementById('home-view');
            if (!homeView || !homeView.classList.contains('active')) {
                return;
            }

            // éšæœºé€‰æ‹©æ¶ˆæ¯ç±»å‹å’Œå†…å®¹
            const types = ['profit', 'friend', 'pet', 'hot'];
            const type = types[Math.floor(Math.random() * types.length)];
            const messages = danmakuMessages[type];
            const message = messages[Math.floor(Math.random() * messages.length)];
            
            // åŠ¨æ€æ›´æ–°æ¶ˆæ¯å†…å®¹
            if (type === 'profit') {
                const profit = (Math.random() * 2000 + 500).toFixed(2);
                message.text = `ä»Šæ—¥æ”¶ç›Š +Â¥${profit}`;
            } else if (type === 'pet') {
                const mood = petData.mood || 75;
                const petMessages = [
                    `è‚¡å°æ¢ï¼šä¸»äººï¼Œä»Šå¤©ä¹Ÿè¦åŠªåŠ›å­¦ä¹ å“¦ï¼å¿ƒæƒ…å€¼${mood}`,
                    `è‚¡å°æ¢å¿ƒæƒ…å€¼${mood}ï¼ŒçŠ¶æ€æ»¡æ»¡ï¼`,
                    `è‚¡å°æ¢ï¼šå®Œæˆäº†æ–°ä»»åŠ¡ï¼Œè·å¾—ç»éªŒ+50`,
                    `è‚¡å°æ¢ï¼šè®­ç»ƒå®Œæˆï¼Œèƒ½åŠ›å€¼æå‡äº†ï¼`
                ];
                message.text = petMessages[Math.floor(Math.random() * petMessages.length)];
            }

            createDanmaku(message);
        }

        let danmakuInterval = null;

        function initDanmaku() {
            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            if (danmakuInterval) {
                clearInterval(danmakuInterval);
            }

            // ä»…åœ¨é¦–é¡µæ˜¾ç¤ºå¼¹å¹•
            const homeView = document.getElementById('home-view');
            if (homeView && homeView.classList.contains('active')) {
                // åˆå§‹åŒ–å¼¹å¹•è½¨é“
                if (danmakuTracks.length === 0) {
                    initDanmakuTracks();
                }
                
                // ç«‹å³æ˜¾ç¤ºä¸€æ¡
                setTimeout(startDanmaku, 1000);
                // æ¯2-4ç§’æ˜¾ç¤ºä¸€æ¡æ–°å¼¹å¹•ï¼ˆè§†é¢‘å¼¹å¹•é¢‘ç‡ï¼‰
                danmakuInterval = setInterval(() => {
                    startDanmaku();
                }, 2000 + Math.random() * 2000);
            } else {
                // å¦‚æœä¸æ˜¯é¦–é¡µï¼Œæ¸…é™¤å¼¹å¹•
                const container = document.getElementById('danmakuContainer');
                if (container) {
                    container.innerHTML = '';
                }
                // é‡ç½®è½¨é“
                danmakuTracks.length = 0;
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿å¼¹çª—
        window.addEventListener('DOMContentLoaded', function() {
            const welcomeModal = document.getElementById('welcomeModal');
            const hasSeenModal = localStorage.getItem('hasSeenWelcomeModal');
            
            // æ›´æ–°å¼¹çª—å†…å®¹
            updateWelcomeModal();
            
            if (!hasSeenModal) {
                setTimeout(() => {
                    if (welcomeModal) {
                        welcomeModal.classList.add('show');
                    }
                }, 500);
            }

            // åˆå§‹åŒ–å¼¹å¹•ç³»ç»Ÿ
            setTimeout(() => {
                initDanmaku();
            }, 2000);
        });

        // å¼€å§‹é—®ç­”æŒ‘æˆ˜
        function startQuiz() {
            showToast('é‡‘èçŸ¥è¯†é—®ç­”æŒ‘æˆ˜å¼€å§‹ï¼');
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„é—®ç­”é€»è¾‘
        }

        // åˆå§‹åŒ– Lucide å›¾æ ‡
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // åˆå§‹åŒ–æ—¶æ›´æ–°æˆ‘çš„é¡µé¢ç”¨æˆ·ID
            if (currentUserId) {
                const myUserId = document.getElementById('my-full-user-id-display');
                if (myUserId) {
                    myUserId.textContent = currentUserId.substring(0, 12) + '...';
                }
            }
            
            // åˆå§‹åŒ– Firebaseï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼Œç­‰å¾… Firebase SDK åŠ è½½ï¼‰
            setTimeout(() => {
                if (window.firebaseDb) {
                    initFirebase();
                } else {
                    // å¦‚æœ Firebase æœªåŠ è½½ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨
                    loadFromLocalStorage();
                }
            }, 1000);
        });

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿å¼¹çª—
        window.addEventListener('DOMContentLoaded', function() {
            const welcomeModal = document.getElementById('welcomeModal');
            const hasSeenModal = localStorage.getItem('hasSeenWelcomeModal');
            
            if (!hasSeenModal) {
                setTimeout(() => {
                    welcomeModal.classList.add('show');
                }, 500);
            }
        });

        // å…³é—­æ¬¢è¿å¼¹çª—
        function closeWelcomeModal() {
            const welcomeModal = document.getElementById('welcomeModal');
            welcomeModal.classList.remove('show');
            localStorage.setItem('hasSeenWelcomeModal', 'true');
        }

        // ç‚¹å‡»å¼¹çª—èƒŒæ™¯å…³é—­
        document.getElementById('welcomeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeWelcomeModal();
            }
        });

        // å¯¼èˆªåˆ°ç›¸åº”æ¿å—
        function navigateToSection(section) {
            closeWelcomeModal();
            
            let targetElement = null;
            switch(section) {
                case 'stock-profit':
                    showToast('æ­£åœ¨è·³è½¬åˆ°ç‚’è‚¡æ”¶ç›Šæ¿å—...');
                    // å¯ä»¥æ·»åŠ æ»šåŠ¨åˆ°ç›¸åº”ä½ç½®çš„ä»£ç 
                    break;
                case 'hot-topics':
                    showToast('æ­£åœ¨è·³è½¬åˆ°çƒ­é—¨é‡‘èè¯é¢˜æ¿å—...');
                    // å¯ä»¥æ·»åŠ æ»šåŠ¨åˆ°ç¤¾åŒºè®¨è®ºåŒºçš„ä»£ç 
                    const communitySection = document.querySelector('.community-tabs');
                    if (communitySection) {
                        communitySection.scrollIntoView({ behavior: 'smooth' });
                    }
                    break;
                case 'hot-news':
                    showToast('æ­£åœ¨è·³è½¬åˆ°çƒ­é—¨é‡‘èå’¨è¯¢æ¿å—...');
                    // å¯ä»¥æ·»åŠ æ»šåŠ¨åˆ°ç›¸åº”ä½ç½®çš„ä»£ç 
                    break;
            }
        }

        // è‚¡ç¥¨å¡ç‰Œç¿»è½¬åŠŸèƒ½
        function flipStockCard(container) {
            const card = container.querySelector('.stock-card');
            const isFlipped = card.classList.contains('flipped');
            
            // å¦‚æœå·²ç»ç¿»è½¬ï¼Œå†æ¬¡ç‚¹å‡»å¯ä»¥ç¿»å›æ¥
            if (isFlipped) {
                card.classList.remove('flipped');
            } else {
                card.classList.add('flipped');
            }
        }

        // å® ç‰©äº’åŠ¨åŠŸèƒ½
        async function petInteraction() {
            // å¢åŠ å¿ƒæƒ…å€¼
            petData.mood = Math.min(100, (petData.mood || 75) + 5);
            
            // æ·»åŠ æ´»åŠ¨æ—¥å¿—
            addActivityLog('interact', 'æŠšæ‘¸è‚¡å°æ¢ï¼Œå¿ƒæƒ…å€¼+5');
            
            // ä¿å­˜æ•°æ®
            await saveUserData();
            updateUI();
            
            showToast('ğŸ‘‹ è‚¡å°æ¢å¾ˆå¼€å¿ƒï¼å¿ƒæƒ…å€¼+5');
            
            // æ·»åŠ ç®€å•çš„åŠ¨ç”»æ•ˆæœ
            const petAvatar = document.querySelector('.pet-avatar');
            petAvatar.style.animation = 'petWave 0.5s ease';
            setTimeout(() => {
                petAvatar.style.animation = '';
            }, 500);
        }

        // IPåˆ‡æ¢åŠŸèƒ½ï¼šç‚¹å‡»å¤´åƒæ˜¾ç¤ºå¯¹åº”å­¦ä¹ ä»»åŠ¡
        function switchIP(ipName) {
            // éšè—æ‰€æœ‰é¢æ¿
            document.querySelectorAll('.ip-task-panel').forEach(panel => {
                panel.style.display = 'none';
            });
            // æ˜¾ç¤ºé€‰ä¸­IPçš„é¢æ¿
            document.getElementById(`${ipName}-panel`).style.display = 'grid';
            
            // æ›´æ–°å¤´åƒæ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.ip-avatar').forEach(avatar => {
                avatar.classList.remove('active');
            });
            document.getElementById(`${ipName}-avatar`).classList.add('active');
            
            showToast(`${document.querySelector(`[onclick="switchIP('${ipName}')"] .ip-name`).textContent}çš„å­¦ä¹ ä»»åŠ¡å·²åŠ è½½`);
        }

        // ç¤¾åŒºæ ‡ç­¾åˆ‡æ¢
        function switchCommunity(tabName) {
            document.querySelectorAll('.community-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.community-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`[onclick="switchCommunity('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-content`).classList.add('active');
        }

        // æ’è¡Œæ¦œæ ‡ç­¾åˆ‡æ¢
        function switchRanking(rankingType) {
            document.querySelectorAll('.ranking-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.ranking-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const clickedTab = document.querySelector(`[onclick="switchRanking('${rankingType}')"]`);
            if (clickedTab) {
                clickedTab.classList.add('active');
            }
            
            const targetContent = document.getElementById(`${rankingType}-ranking`);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        // å® ç‰©å–‚å…»
        async function feedPet() {
            // æ£€æŸ¥ç§¯åˆ†æ˜¯å¦è¶³å¤Ÿï¼ˆå–‚é£Ÿæ¶ˆè€—10ç§¯åˆ†ï¼‰
            const feedCost = 10;
            if ((petData.points || 0) < feedCost) {
                showToast('ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•å–‚é£Ÿï¼');
                return;
            }
            
            // å¢åŠ å¿ƒæƒ…å€¼ï¼Œæ¶ˆè€—ç§¯åˆ†
            petData.mood = Math.min(100, (petData.mood || 75) + 10);
            petData.points = Math.max(0, (petData.points || 0) - feedCost);
            
            // æ·»åŠ æ´»åŠ¨æ—¥å¿—
            addActivityLog('feed', 'å–‚é£Ÿäº†è‚¡å°æ¢ï¼Œå¿ƒæƒ…å€¼+10');
            
            // ä¿å­˜æ•°æ®
            await saveUserData();
            updateUI();
            
            showToast('å·²å–‚é£Ÿè‚¡å°æ¢ï¼Œå¿ƒæƒ…å€¼+10ï¼Œæ¶ˆè€—10ç§¯åˆ†ï¼');
        }

        // å® ç‰©è®­ç»ƒ
        async function trainPet() {
            // å¢åŠ åˆ†æèƒ½åŠ›
            petData.analysisAbility = Math.min(100, (petData.analysisAbility || 65) + 5);
            petData.points = (petData.points || 0) + 10;
            
            // æ·»åŠ æ´»åŠ¨æ—¥å¿—
            addActivityLog('train', 'è¿›è¡Œäº†è®­ç»ƒï¼Œåˆ†æèƒ½åŠ›+5');
            
            // ä¿å­˜æ•°æ®
            await saveUserData();
            updateUI();
            
            showToast('è‚¡å°æ¢è®­ç»ƒå®Œæˆï¼Œåˆ†æèƒ½åŠ›+5ï¼Œç§¯åˆ†+10ï¼');
        }

        // å¼€å§‹ç‰¹å®šè®­ç»ƒ
        async function startTraining(type) {
            let effect = '';
            let moodCost = 0;
            let abilityGain = 0;
            let abilityType = '';
            
            if (type === 'kline') {
                abilityGain = 8;
                abilityType = 'analysisAbility';
                effect = 'åˆ†æèƒ½åŠ›+8';
                moodCost = 5;
            } else if (type === 'finance') {
                abilityGain = 10;
                abilityType = 'analysisAbility';
                effect = 'åˆ†æèƒ½åŠ›+10';
                moodCost = 8;
            } else if (type === 'market') {
                abilityGain = 6;
                abilityType = 'marketSensitivity';
                effect = 'å¸‚åœºæ•æ„Ÿåº¦+6';
                moodCost = 6;
            } else if (type === 'risk') {
                abilityGain = 7;
                abilityType = 'riskRecognition';
                effect = 'é£é™©è¯†åˆ«+7';
                moodCost = 7;
            }
            
            // æ£€æŸ¥å¿ƒæƒ…å€¼æ˜¯å¦è¶³å¤Ÿ
            const currentMood = petData.mood || 75;
            if (currentMood < moodCost) {
                showToast(`å¿ƒæƒ…å€¼ä¸è¶³ï¼éœ€è¦${moodCost}ç‚¹å¿ƒæƒ…å€¼ï¼Œå½“å‰${currentMood}ç‚¹ã€‚è¯·å…ˆå–‚é£Ÿæå‡å¿ƒæƒ…ï¼`);
                return;
            }
            
            // æ¶ˆè€—å¿ƒæƒ…å€¼ï¼Œæå‡èƒ½åŠ›
            petData.mood = Math.max(0, currentMood - moodCost);
            petData[abilityType] = Math.min(100, (petData[abilityType] || 0) + abilityGain);
            
            // æ·»åŠ æ´»åŠ¨æ—¥å¿—
            addActivityLog('train', `å®Œæˆ${effect}è®­ç»ƒï¼Œæ¶ˆè€—${moodCost}å¿ƒæƒ…`);
            
            // ä¿å­˜æ•°æ®
            await saveUserData();
            updateUI();
            
            showToast(`è®­ç»ƒå®Œæˆï¼Œè‚¡å°æ¢${effect}ï¼Œæ¶ˆè€—${moodCost}ç‚¹å¿ƒæƒ…å€¼ï¼`);
        }

        // å®Œæˆä»»åŠ¡
        async function completeTask(button) {
            // æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²å®Œæˆ
            if (button.disabled || button.classList.contains('completed')) {
                return;
            }
            
            // è·å–ä»»åŠ¡å¥–åŠ±ç§¯åˆ†
            const rewardText = button.previousElementSibling?.textContent || '';
            const pointsMatch = rewardText.match(/(\d+)/);
            const points = pointsMatch ? parseInt(pointsMatch[1]) : 100;
            
            // å¢åŠ ç§¯åˆ†å’Œç»éªŒï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰ç»éªŒåŠ é€Ÿï¼‰
            const expMultiplier = petData.expBoost ? 1.5 : 1;
            const actualExp = Math.floor(points * expMultiplier);
            petData.points = (petData.points || 0) + points;
            petData.experience = (petData.experience || 0) + actualExp;
            
            // å¦‚æœä½¿ç”¨äº†ç»éªŒåŠ é€Ÿï¼Œæ¶ˆè€—æ‰
            if (petData.expBoost) {
                petData.expBoost = false;
            }
            
            // æ£€æŸ¥æ˜¯å¦å‡çº§ï¼ˆæ¯200ç»éªŒå‡1çº§ï¼‰
            const oldLevel = petData.level || 4;
            const newLevel = Math.floor((petData.experience || 0) / 200) + 1;
            if (newLevel > oldLevel) {
                petData.level = newLevel;
                addActivityLog('task', `ä»»åŠ¡å®Œæˆï¼Œç­‰çº§æå‡è‡³ L${newLevel}ï¼`);
                showToast(`ä»»åŠ¡å®Œæˆï¼Œè·å¾—${points}ç§¯åˆ†ï¼ç­‰çº§æå‡è‡³ L${newLevel}ï¼`);
            } else {
                addActivityLog('task', `å®Œæˆä»»åŠ¡ï¼Œè·å¾—${points}ç§¯åˆ†`);
                showToast(`ä»»åŠ¡å®Œæˆï¼Œè·å¾—${points}ç§¯åˆ†å¥–åŠ±ï¼`);
            }
            
            // ä¿å­˜æ•°æ®
            await saveUserData();
            updateUI();
            
            button.textContent = 'å·²å®Œæˆ';
            button.classList.add('completed');
            button.disabled = true;
        }

        // æ˜¾ç¤ºæç¤ºæ¡†ï¼ˆä¼˜åŒ–è®¾è®¡ï¼‰
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            toast.style.animation = 'toastSlideIn 0.3s ease';
            
            setTimeout(() => {
                toast.style.animation = 'toastSlideOut 0.3s ease';
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 300);
            }, 2700);
        }

        // ä»»åŠ¡ç­›é€‰åˆ‡æ¢ï¼ˆå·²åœ¨ä¸Šé¢å®šä¹‰ switchTaskFilter å‡½æ•°ï¼‰
    </script>
</body>
</html>
